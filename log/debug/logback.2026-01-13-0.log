2026-01-13 11:47:02.347 logback [http-nio-8083-exec-6] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==>  Preparing: select t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, t1.id, t3.ip_address AS in_ip, t4.inside_id AS insideId, t2.device_id FROM inf_monitor_room t1 INNER JOIN inf_room_computer_out t2 ON t1.id = t2.room INNER JOIN inf_room_computer_in t3 ON t1.id = t3.room LEFT JOIN inf_device3d t4 ON t4.device_guid = t2.device_id left join room_month_score t5 on t1.id=t5.room_id WHERE t2.ip_address = ? 
2026-01-13 11:47:02.347 logback [http-nio-8083-exec-3] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==>  Preparing: select (select Name from inf_policeman where id=main_policeman) as mainPolice,(select Name from inf_policeman where id=sub_policeman) as subPoliceman,t1.room_id,t1.id,t3.ip_address as out_ip,t1.prison_no AS prisonNo from inf_monitor_room t1 INNER JOIN inf_room_computer_in t2 on t1.id=t2.room LEFT JOIN inf_room_computer_out t3 on t2.room=t3.room where t2.ip_address=? AND t3.device_name NOT LIKE '%巡视%'; 
2026-01-13 11:47:02.348 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 11:47:02.348 logback [http-nio-8083-exec-2] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 11:47:02.392 logback [http-nio-8083-exec-3] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 11:47:02.392 logback [http-nio-8083-exec-2] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:02.392 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:02.392 logback [http-nio-8083-exec-6] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==> Parameters: 172.16.40.134(String)
2026-01-13 11:47:02.451 logback [http-nio-8083-exec-3] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - <==      Total: 1
2026-01-13 11:47:02.451 logback [http-nio-8083-exec-6] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - <==      Total: 1
2026-01-13 11:47:02.453 logback [http-nio-8083-exec-6] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 11:47:02.453 logback [http-nio-8083-exec-6] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.134(String)
2026-01-13 11:47:02.457 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 11:47:02.458 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 11:47:02.458 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:02.474 logback [http-nio-8083-exec-6] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 11:47:02.476 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 11:47:02.488 logback [http-nio-8083-exec-2] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 11:47:02.489 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 11:47:02.489 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:02.496 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 11:47:05.575 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 11:47:05.575 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 11:47:05.576 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 11:47:05.576 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.169(String)
2026-01-13 11:47:05.583 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 1
2026-01-13 11:47:05.584 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 11:47:05.584 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 11:47:05.588 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 0
2026-01-13 11:47:05.588 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 11:47:05.589 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.169(String)
2026-01-13 11:47:05.592 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 11:47:05.599 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 1
2026-01-13 11:47:45.389 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 11:47:45.390 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:45.393 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 11:47:45.395 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:45.424 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 11:47:45.424 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 11:47:45.425 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 11:47:45.425 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 11:47:45.426 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:45.426 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:45.442 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 11:47:45.442 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 11:47:54.937 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? AND s.student_id = ? GROUP BY s.student_id 
2026-01-13 11:47:54.939 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String), 350721111202407050001(String)
2026-01-13 11:47:54.948 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 1
2026-01-13 11:47:54.955 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 and ID in ( ? ) ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') Limit 0,20 
2026-01-13 11:47:54.956 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 297edff89395f09c0194f2d8184a005d(String), 350721111202407050001(String)
2026-01-13 11:47:54.990 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 11:47:54.991 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountMedicationRecord - ==>  Preparing: SELECT COUNT(1) FROM (select * from info_medication_record where 1=1 and ID in ( ? ) ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 11:47:54.992 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountMedicationRecord - ==> Parameters: 297edff89395f09c0194f2d8184a005d(String), 350721111202407050001(String)
2026-01-13 11:47:54.997 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountMedicationRecord - <==      Total: 1
2026-01-13 11:47:58.426 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IMedicalDao.saveTaking - ==>  Preparing: INSERT INTO info_taking ( id,taking_id,sign_photo,opr_time,opr_man )VALUES ( ?,?,?,NOW(),? ) 
2026-01-13 11:47:58.428 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IMedicalDao.saveTaking - ==> Parameters: 2cca6e35aa6a4cb4bd701f42a5db4a3820260113114758(String), 2cca6e35aa6a4cb4bd701f42a5db4a3820260113114758(String), [B@3feee43c(byte[]), 350721111202407050001(String)
2026-01-13 11:47:58.446 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IMedicalDao.saveTaking - <==    Updates: 1
2026-01-13 11:47:58.447 logback [http-nio-8083-exec-9] DEBUG c.j.m.I.saveTakingMedication - ==>  Preparing: INSERT INTO info_taking_medicine ( taking_id, distribution_id )VALUES ( ?,? ) 
2026-01-13 11:47:58.447 logback [http-nio-8083-exec-9] DEBUG c.j.m.I.saveTakingMedication - ==> Parameters: 2cca6e35aa6a4cb4bd701f42a5db4a3820260113114758(String), 297edff89395f09c0194f2d8184a005d(String)
2026-01-13 11:47:58.456 logback [http-nio-8083-exec-9] DEBUG c.j.m.I.saveTakingMedication - <==    Updates: 1
2026-01-13 11:47:58.485 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 11:47:58.486 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 11:47:58.493 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 11:47:58.494 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 11:47:58.495 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 11:47:58.503 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 11:47:58.506 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 11:47:58.507 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 11:47:58.513 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 11:47:58.514 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 11:47:58.515 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 11:47:58.522 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 12:00:02.076 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 12:00:02.076 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 12:00:02.091 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 2
2026-01-13 12:00:02.091 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 12:00:02.091 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 12:00:02.107 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 12:00:02.107 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 12:00:02.107 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 12:00:02.122 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 12:00:02.122 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 12:00:02.122 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 12:00:02.122 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 12:00:02.122 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 12:00:02.138 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 12:00:02.138 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 12:00:04.146 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 12:00:04.146 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 12:00:04.146 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 2
2026-01-13 12:00:04.146 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 12:00:04.146 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 12:00:04.178 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 12:00:04.178 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 12:00:04.178 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 12:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 12:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 12:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 12:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 12:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 12:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 12:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 12:27:42.996 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 12:27:42.996 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.169(String)
2026-01-13 12:27:43.084 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 12:27:43.084 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.169(String)
2026-01-13 12:27:43.084 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 12:27:43.084 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.169(String)
2026-01-13 12:27:43.406 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 12:27:43.406 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.134(String)
2026-01-13 12:27:43.642 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 1
2026-01-13 12:27:43.642 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 12:27:43.642 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.134(String)
2026-01-13 12:27:43.861 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 13:34:46.580 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==>  Preparing: select t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, t1.id, t3.ip_address AS in_ip, t4.inside_id AS insideId, t2.device_id FROM inf_monitor_room t1 INNER JOIN inf_room_computer_out t2 ON t1.id = t2.room INNER JOIN inf_room_computer_in t3 ON t1.id = t3.room LEFT JOIN inf_device3d t4 ON t4.device_guid = t2.device_id left join room_month_score t5 on t1.id=t5.room_id WHERE t2.ip_address = ? 
2026-01-13 13:34:46.597 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==> Parameters: 172.16.40.134(String)
2026-01-13 13:34:46.681 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - <==      Total: 1
2026-01-13 13:34:46.715 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 13:34:46.731 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.134(String)
2026-01-13 13:34:46.737 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 1
2026-01-13 13:34:46.881 logback [http-nio-8083-exec-17] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==>  Preparing: select (select Name from inf_policeman where id=main_policeman) as mainPolice,(select Name from inf_policeman where id=sub_policeman) as subPoliceman,t1.room_id,t1.id,t3.ip_address as out_ip,t1.prison_no AS prisonNo from inf_monitor_room t1 INNER JOIN inf_room_computer_in t2 on t1.id=t2.room LEFT JOIN inf_room_computer_out t3 on t2.room=t3.room where t2.ip_address=? AND t3.device_name NOT LIKE '%巡视%'; 
2026-01-13 13:34:46.932 logback [http-nio-8083-exec-17] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 13:34:46.999 logback [http-nio-8083-exec-17] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - <==      Total: 1
2026-01-13 13:34:49.932 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 13:34:49.946 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 13:34:49.960 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 1
2026-01-13 13:34:49.961 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 13:34:49.966 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 13:34:49.980 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 13:35:33.818 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 13:35:33.819 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.134(String)
2026-01-13 13:35:33.828 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 1
2026-01-13 13:35:33.828 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 13:35:33.828 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.134(String)
2026-01-13 13:35:33.830 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 13:35:34.064 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 13:35:34.065 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.169(String)
2026-01-13 13:35:34.074 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 0
2026-01-13 13:35:34.075 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 13:35:34.075 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.169(String)
2026-01-13 13:35:34.080 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 1
2026-01-13 13:36:12.496 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==>  Preparing: select (select Name from inf_policeman where id=main_policeman) as mainPolice,(select Name from inf_policeman where id=sub_policeman) as subPoliceman,t1.room_id,t1.id,t3.ip_address as out_ip,t1.prison_no AS prisonNo from inf_monitor_room t1 INNER JOIN inf_room_computer_in t2 on t1.id=t2.room LEFT JOIN inf_room_computer_out t3 on t2.room=t3.room where t2.ip_address=? AND t3.device_name NOT LIKE '%巡视%'; 
2026-01-13 13:36:12.497 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 13:36:12.497 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - <==      Total: 1
2026-01-13 13:36:12.530 logback [http-nio-8083-exec-21] DEBUG c.j.m.IUpgradeDao.syncInVersion - ==>  Preparing: UPDATE inf_room_computer_in SET current_version = ? WHERE ip_address = ? 
2026-01-13 13:36:12.530 logback [http-nio-8083-exec-21] DEBUG c.j.m.IUpgradeDao.syncInVersion - ==> Parameters: 68(String), 172.16.40.169(String)
2026-01-13 13:36:12.548 logback [http-nio-8083-exec-21] DEBUG c.j.m.IUpgradeDao.syncInVersion - <==    Updates: 1
2026-01-13 13:36:13.626 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 13:36:13.626 logback [http-nio-8083-exec-24] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==>  Preparing: UPDATE inf_room_computer_out SET current_version = ? WHERE ip_address = ? 
2026-01-13 13:36:13.627 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 13:36:13.627 logback [http-nio-8083-exec-24] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==> Parameters: 97(String), 172.16.40.169(String)
2026-01-13 13:36:13.632 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 0
2026-01-13 13:36:13.632 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 13:36:13.632 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.169(String)
2026-01-13 13:36:13.632 logback [http-nio-8083-exec-24] DEBUG c.j.m.IUpgradeDao.syncOutVersion - <==    Updates: 0
2026-01-13 13:36:13.650 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 13:36:13.670 logback [http-nio-8083-exec-23] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==>  Preparing: select * from info_outdoor_menu where visible=1 order by sort asc 
2026-01-13 13:36:13.670 logback [http-nio-8083-exec-23] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==> Parameters: 
2026-01-13 13:36:13.694 logback [http-nio-8083-exec-23] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - <==      Total: 12
2026-01-13 13:36:14.950 logback [http-nio-8083-exec-27] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==>  Preparing: select * from info_outdoor_menu where visible=1 order by sort asc 
2026-01-13 13:36:14.950 logback [http-nio-8083-exec-26] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==>  Preparing: UPDATE inf_room_computer_out SET current_version = ? WHERE ip_address = ? 
2026-01-13 13:36:14.950 logback [http-nio-8083-exec-25] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 13:36:14.951 logback [http-nio-8083-exec-27] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==> Parameters: 
2026-01-13 13:36:14.951 logback [http-nio-8083-exec-26] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==> Parameters: 97(String), 172.16.40.134(String)
2026-01-13 13:36:14.951 logback [http-nio-8083-exec-25] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.134(String)
2026-01-13 13:36:14.967 logback [http-nio-8083-exec-26] DEBUG c.j.m.IUpgradeDao.syncOutVersion - <==    Updates: 1
2026-01-13 13:36:14.968 logback [http-nio-8083-exec-25] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 1
2026-01-13 13:36:14.968 logback [http-nio-8083-exec-25] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 13:36:14.968 logback [http-nio-8083-exec-25] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.134(String)
2026-01-13 13:36:14.982 logback [http-nio-8083-exec-25] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 1
2026-01-13 13:36:14.982 logback [http-nio-8083-exec-27] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - <==      Total: 12
2026-01-13 13:36:19.619 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.620 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 13:36:19.619 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.620 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 13:36:19.675 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 13:36:19.675 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 13:36:19.676 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.676 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.676 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 13:36:19.676 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 13:36:19.687 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 13:36:19.687 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 13:36:19.687 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.687 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.688 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 13:36:19.688 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 13:36:19.693 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 13:36:19.693 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 13:36:19.694 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 13:36:19.694 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 13:36:19.695 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 13:36:19.695 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 13:36:19.701 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 13:36:19.701 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.701 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 13:36:19.702 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 13:36:19.702 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.702 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 13:36:19.706 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 13:36:19.706 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.707 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 13:36:19.714 logback [http-nio-8083-exec-28] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 13:36:19.715 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:36:19.715 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 13:36:19.721 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 13:36:19.733 logback [http-nio-8083-exec-28] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 13:36:21.056 logback [http-nio-8083-exec-30] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==>  Preparing: SELECT s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_text name,item_value from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.item_value WHERE 1 = 1 AND s.student_id NOT IN ( SELECT DISTINCT o.student_id FROM info_student_outinroom o WHERE o.room_id = ? AND o.out_time IS NOT NULL AND o.back_time IS NULL ) ORDER BY s.student_no ASC 
2026-01-13 13:36:21.057 logback [http-nio-8083-exec-30] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 13:36:21.068 logback [http-nio-8083-exec-30] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - <==      Total: 7
2026-01-13 13:36:21.069 logback [http-nio-8083-exec-30] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==>  Preparing: SELECT date_format(so.out_time,'%Y-%m-%d %T') AS outTime, so.reson_type AS reasonType, d.item_text AS reasonTypeName,so.id as outRecordId, s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state=1 AND room_num = ?) s INNER JOIN info_student_outinroom so ON so.student_id = s.student_id AND so.room_id = ? AND (so.out_time IS NOT NULL AND so.back_time IS NULL) LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT * FROM sys_dict_item t WHERE t.dict_id = ( SELECT id FROM sys_dict p WHERE p.dict_code = 'OUT_ROOM_REASON' )) d ON d.item_value = so.reson_type LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_value val,item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.val WHERE 1 = 1 ORDER BY s.student_no ASC 
2026-01-13 13:36:21.070 logback [http-nio-8083-exec-30] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 13:36:21.075 logback [http-nio-8083-exec-30] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - <==      Total: 0
2026-01-13 13:36:21.112 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryBedInfoList - ==>  Preparing: SELECT t1.bed_id AS bedId, t1.room_id roomId, t2.room_id AS room, date_format(t4.birthday,'%Y-%m-%d') AS birthday, t4.handle_case_comp as handleCaseComp, IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ t4.native_address as nativeAddress, t1.bed_num as bedNum, t4.student_id as studentId, t3.police_id AS policeId, t4.SNBH AS studentNo, DATE_FORMAT(t4.entry_date,'%Y-%m-%d') AS entryDate, t4.litigation_code AS litigationCode, t4.litigation_name AS litigationName, t4.involved_type as involvedType, t4.involved_type AS involvedName, t4.briefly_case AS brieflyCase, t4.name, t4.state, t5.name AS stateName, risk.all_risk_level AS riskLevel, bahj.`name` as bahjName /*办案环节*/ from (SELECT * FROM info_bed WHERE room_id = ?) t1 LEFT JOIN inf_monitor_room t2 on t1.room_id=t2.id LEFT JOIN info_bed_arrangement t3 on t1.bed_id=t3.bed_id AND t3.student_id != '-1' AND t3.operation_type=0 LEFT JOIN info_student t4 on t3.student_id=t4.student_id AND t4.state = 1 and t4.room_num = ? LEFT JOIN (SELECT item_text name,item_value val FROM sys_dict_item WHERE dict_id=(SELECT id FROM sys_dict WHERE dict_code='STUDENT_STATE')) t5 ON t4.state=t5.val LEFT JOIN info_student_levelrisk risk ON t4.student_id = risk.student_id LEFT JOIN (SELECT item_text name,item_value val FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE') ) bahj on bahj.val = t4.hand_case LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = t4.place_domicile where 1 = 1 GROUP BY t1.bed_id ORDER BY t1.bed_num+0 asc 
2026-01-13 13:36:21.113 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryBedInfoList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 13:36:21.125 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryBedInfoList - <==      Total: 20
2026-01-13 13:36:21.158 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - ==>  Preparing: select group_concat(studentNo separator ';') as studentNo,group_concat(stuName separator ';') as stuName,cast(time_range as char) as time_range from (select (select student_no from info_student where student_id=t1.student_id and room_num = t1.room_id) studentNo, (select `name` from info_student where student_id=t1.student_id and room_num = t1.room_id) stuName, CONCAT(t3.start_time,'-',t3.end_time) as time_range from info_duty_schedule_setting t3 left JOIN (select * from info_duty_adjust where room_id=? and operation_type=0 and duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END))t1 on t1.setting_id=t3.setting_id where start_time is not NULL )t GROUP BY t.time_range; 
2026-01-13 13:36:21.159 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.164 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - <==      Total: 5
2026-01-13 13:36:21.211 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - ==>  Preparing: select t1.id as roomId,t1.room_id as roomNo,t1.room_name as roomName,t2.groupname as groupName from inf_monitor_room t1,inf_monitor_roomgroup t2 where t1.group_id=t2.id and t1.id=? 
2026-01-13 13:36:21.212 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.215 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - <==      Total: 1
2026-01-13 13:36:21.216 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobSetInfoList - ==>  Preparing: select t.setting_id settingId,t.setting_name settingName,t.order_num as ordNum from info_job_settings t ORDER BY order_num asc 
2026-01-13 13:36:21.217 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobSetInfoList - ==> Parameters: 
2026-01-13 13:36:21.221 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobSetInfoList - <==      Total: 6
2026-01-13 13:36:21.222 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 13:36:21.222 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), d24825d6ab2548fda0c53da790a3c33b20250227143032(String)
2026-01-13 13:36:21.226 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 13:36:21.226 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 13:36:21.226 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), 0f7eb044dd52475eb630f973c5085eb820250227143049(String)
2026-01-13 13:36:21.230 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 13:36:21.230 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 13:36:21.230 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), 1e9dd0c5a5314c58b5b9b4fd056529fc20250227143124(String)
2026-01-13 13:36:21.235 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 13:36:21.235 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 13:36:21.236 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), 4f8b5217d1034fa3b0ccdf15c185cdf820250227143506(String)
2026-01-13 13:36:21.240 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 13:36:21.240 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 13:36:21.240 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), b61d148453964a1b9f2c49280ba7e3f220250227143236(String)
2026-01-13 13:36:21.244 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 13:36:21.244 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 13:36:21.244 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), 848b0eea8b044781be16e45eb625fdb320250227143253(String)
2026-01-13 13:36:21.248 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 13:36:21.397 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 13:36:21.398 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.430 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 13:36:21.431 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 13:36:21.432 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.439 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 13:36:21.454 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 13:36:21.455 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.462 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 13:36:21.463 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 13:36:21.463 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 13:36:21.469 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 13:36:21.470 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 13:36:21.470 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 13:36:21.475 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 13:36:21.476 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 13:36:21.476 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 13:36:21.481 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 13:36:21.510 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 13:36:21.511 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 13:36:21.511 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.512 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.514 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 13:36:21.515 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.537 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 13:36:21.537 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 13:36:21.538 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.538 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 13:36:21.538 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 13:36:21.538 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.543 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 13:36:21.544 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 13:36:21.544 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 13:36:21.544 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 13:36:21.544 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:21.553 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 13:36:22.118 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 13:36:22.118 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 13:36:22.127 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 1
2026-01-13 13:36:22.128 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 13:36:22.128 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 13:36:22.141 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 13:36:22.235 logback [http-nio-8083-exec-9] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 13:36:22.236 logback [http-nio-8083-exec-9] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:22.258 logback [http-nio-8083-exec-9] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 13:36:22.259 logback [http-nio-8083-exec-9] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 13:36:22.259 logback [http-nio-8083-exec-9] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 13:36:22.286 logback [http-nio-8083-exec-9] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 13:36:22.308 logback [http-nio-8083-exec-7] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 13:36:22.309 logback [http-nio-8083-exec-7] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 13:36:22.343 logback [http-nio-8083-exec-7] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 13:36:22.593 logback [http-nio-8083-exec-11] DEBUG c.j.m.I.queryPatrolRecords - ==>  Preparing: select item_text name,item_value val from sys_dict_item where dict_id='5234' and status=1 
2026-01-13 13:36:22.593 logback [http-nio-8083-exec-11] DEBUG c.j.m.I.queryPatrolRecords - ==> Parameters: 
2026-01-13 13:36:22.601 logback [http-nio-8083-exec-11] DEBUG c.j.m.I.queryPatrolRecords - <==      Total: 7
2026-01-13 13:39:12.234 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==>  Preparing: select (select Name from inf_policeman where id=main_policeman) as mainPolice,(select Name from inf_policeman where id=sub_policeman) as subPoliceman,t1.room_id,t1.id,t3.ip_address as out_ip,t1.prison_no AS prisonNo from inf_monitor_room t1 INNER JOIN inf_room_computer_in t2 on t1.id=t2.room LEFT JOIN inf_room_computer_out t3 on t2.room=t3.room where t2.ip_address=? AND t3.device_name NOT LIKE '%巡视%'; 
2026-01-13 13:39:12.234 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 13:39:12.239 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - <==      Total: 1
2026-01-13 13:39:12.239 logback [http-nio-8083-exec-21] DEBUG c.j.m.IUpgradeDao.syncInVersion - ==>  Preparing: UPDATE inf_room_computer_in SET current_version = ? WHERE ip_address = ? 
2026-01-13 13:39:12.239 logback [http-nio-8083-exec-21] DEBUG c.j.m.IUpgradeDao.syncInVersion - ==> Parameters: 68(String), 172.16.40.169(String)
2026-01-13 13:39:12.246 logback [http-nio-8083-exec-21] DEBUG c.j.m.IUpgradeDao.syncInVersion - <==    Updates: 1
2026-01-13 13:39:12.631 logback [http-nio-8083-exec-22] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==>  Preparing: UPDATE inf_room_computer_out SET current_version = ? WHERE ip_address = ? 
2026-01-13 13:39:12.636 logback [http-nio-8083-exec-24] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==>  Preparing: select * from info_outdoor_menu where visible=1 order by sort asc 
2026-01-13 13:39:12.636 logback [http-nio-8083-exec-22] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==> Parameters: 97(String), 172.16.40.169(String)
2026-01-13 13:39:12.636 logback [http-nio-8083-exec-23] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 13:39:12.636 logback [http-nio-8083-exec-24] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==> Parameters: 
2026-01-13 13:39:12.636 logback [http-nio-8083-exec-23] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 13:39:12.646 logback [http-nio-8083-exec-22] DEBUG c.j.m.IUpgradeDao.syncOutVersion - <==    Updates: 0
2026-01-13 13:39:12.650 logback [http-nio-8083-exec-23] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 0
2026-01-13 13:39:12.650 logback [http-nio-8083-exec-23] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 13:39:12.650 logback [http-nio-8083-exec-24] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - <==      Total: 12
2026-01-13 13:39:12.655 logback [http-nio-8083-exec-23] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.169(String)
2026-01-13 13:39:12.660 logback [http-nio-8083-exec-23] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 13:41:50.526 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 13:41:50.528 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 13:41:50.535 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 2
2026-01-13 13:41:50.537 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 13:41:50.537 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 13:41:50.541 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 13:41:50.543 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 13:41:50.543 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 13:41:50.548 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 13:41:50.548 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 13:41:50.549 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 13:41:50.558 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 13:41:50.558 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 13:41:50.559 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 13:41:50.572 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 13:41:52.573 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 13:41:52.574 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 13:41:52.584 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 2
2026-01-13 13:41:52.585 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 13:41:52.585 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 13:41:52.590 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 13:41:52.591 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 13:41:52.591 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 13:41:52.600 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 13:41:52.601 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 13:41:52.601 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 13:41:52.608 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 13:41:52.608 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 13:41:52.608 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 13:41:52.613 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 13:45:02.090 logback [http-nio-8083-exec-30] DEBUG c.j.m.IUpgradeDao.syncInVersion - ==>  Preparing: UPDATE inf_room_computer_in SET current_version = ? WHERE ip_address = ? 
2026-01-13 13:45:02.091 logback [http-nio-8083-exec-30] DEBUG c.j.m.IUpgradeDao.syncInVersion - ==> Parameters: 68(String), 172.16.40.169(String)
2026-01-13 13:45:02.098 logback [http-nio-8083-exec-30] DEBUG c.j.m.IUpgradeDao.syncInVersion - <==    Updates: 1
2026-01-13 13:45:02.123 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==>  Preparing: select (select Name from inf_policeman where id=main_policeman) as mainPolice,(select Name from inf_policeman where id=sub_policeman) as subPoliceman,t1.room_id,t1.id,t3.ip_address as out_ip,t1.prison_no AS prisonNo from inf_monitor_room t1 INNER JOIN inf_room_computer_in t2 on t1.id=t2.room LEFT JOIN inf_room_computer_out t3 on t2.room=t3.room where t2.ip_address=? AND t3.device_name NOT LIKE '%巡视%'; 
2026-01-13 13:45:02.123 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 13:45:02.128 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - <==      Total: 1
2026-01-13 13:45:04.730 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.730 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 13:45:04.736 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 13:45:04.736 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.736 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.169(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 13:45:04.745 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 13:45:04.745 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.746 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 13:45:04.751 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 13:45:04.752 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 13:45:04.753 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 13:45:04.759 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 13:45:04.759 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.760 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 13:45:04.765 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 13:45:04.765 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.766 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.169(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 13:45:04.784 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 13:45:04.842 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.843 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 13:45:04.851 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 13:45:04.852 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.852 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.169(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 13:45:04.864 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 13:45:04.865 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.865 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 13:45:04.870 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 13:45:04.870 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 13:45:04.871 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 13:45:04.874 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 13:45:04.875 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.875 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 13:45:04.879 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 13:45:04.880 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 13:45:04.880 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.169(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 13:45:04.887 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 13:45:05.605 logback [http-nio-8083-exec-3] DEBUG c.j.m.InfoNotifyDao.infoNotifyList - ==>  Preparing: (SELECT (case when t1.irr_state = 1 then CONCAT(t5.lev_name,'[','集体违规',']',t3.reason_content) else CONCAT(t5.lev_name,'[',t2.`name`,']',t3.reason_content) end) infoContent, DATE_FORMAT(t1.relus_time,'%Y-%m-%d %T') infoTime, '违规' as infoType FROM info_irr_record t1 LEFT JOIN info_student t2 ON FIND_IN_SET(t2.student_id,t1.student_id) LEFT JOIN info_irregularities_reas t3 ON t1.reason_id = t3.reason_id LEFT JOIN inf_monitor_room t4 ON t1.room_id = t4.id LEFT JOIN info_irregularities_lev t5 on t1.lev_id = t5.lev_id WHERE to_days(now()) - to_days(t1.create_time) < ? AND t4.id = ? ) union (SELECT t1.message_info infoContent, DATE_FORMAT(t1.release_time,'%Y-%m-%d %T') infoTime, '管教留言' as infoType FROM info_guestbook t1 LEFT JOIN inf_monitor_room t4 ON t1.room_id = t4.id WHERE t1.is_invalid = 1 and to_days(now()) - to_days(t1.release_time) < ? AND t4.id = ? ) ORDER BY infoTime desc 
2026-01-13 13:45:05.606 logback [http-nio-8083-exec-3] DEBUG c.j.m.InfoNotifyDao.infoNotifyList - ==> Parameters: 3(String), 35072111199996(String), 3(String), 35072111199996(String)
2026-01-13 13:45:05.611 logback [http-nio-8083-exec-3] DEBUG c.j.m.InfoNotifyDao.infoNotifyList - <==      Total: 0
2026-01-13 13:45:05.620 logback [http-nio-8083-exec-5] DEBUG c.j.m.IMenuDao.queryIndoorMenu - ==>  Preparing: select * from info_indoor_menu where visible=1 order by sort asc 
2026-01-13 13:45:05.621 logback [http-nio-8083-exec-5] DEBUG c.j.m.IMenuDao.queryIndoorMenu - ==> Parameters: 
2026-01-13 13:45:05.669 logback [http-nio-8083-exec-5] DEBUG c.j.m.IMenuDao.queryIndoorMenu - <==      Total: 11
2026-01-13 13:45:06.080 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 13:45:06.080 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.169(String)
2026-01-13 13:45:06.091 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 0
2026-01-13 13:45:06.092 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 13:45:06.092 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.169(String)
2026-01-13 13:45:06.100 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 1
2026-01-13 13:46:08.859 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryAppealType - ==>  Preparing: SELECT tb1.appeal_item_id AS appealItemId, tb1.appeal_name AS appealName, tb1.sort_num AS sortNum FROM info_appeal_type tb1 WHERE is_invalid = 1 ORDER BY tb1.sort_num ASC 
2026-01-13 13:46:08.859 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryAppealType - ==> Parameters: 
2026-01-13 13:46:09.002 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryAppealType - <==      Total: 0
2026-01-13 14:22:24.770 logback [http-nio-8083-exec-1] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==>  Preparing: select (select Name from inf_policeman where id=main_policeman) as mainPolice,(select Name from inf_policeman where id=sub_policeman) as subPoliceman,t1.room_id,t1.id,t3.ip_address as out_ip,t1.prison_no AS prisonNo from inf_monitor_room t1 INNER JOIN inf_room_computer_in t2 on t1.id=t2.room LEFT JOIN inf_room_computer_out t3 on t2.room=t3.room where t2.ip_address=? AND t3.device_name NOT LIKE '%巡视%'; 
2026-01-13 14:22:24.770 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==>  Preparing: select t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, t1.id, t3.ip_address AS in_ip, t4.inside_id AS insideId, t2.device_id FROM inf_monitor_room t1 INNER JOIN inf_room_computer_out t2 ON t1.id = t2.room INNER JOIN inf_room_computer_in t3 ON t1.id = t3.room LEFT JOIN inf_device3d t4 ON t4.device_guid = t2.device_id left join room_month_score t5 on t1.id=t5.room_id WHERE t2.ip_address = ? 
2026-01-13 14:22:24.785 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==> Parameters: 172.16.40.134(String)
2026-01-13 14:22:24.785 logback [http-nio-8083-exec-1] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 14:22:24.810 logback [http-nio-8083-exec-1] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - <==      Total: 1
2026-01-13 14:22:24.810 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - <==      Total: 1
2026-01-13 14:22:24.810 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:22:24.810 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.134(String)
2026-01-13 14:22:24.820 logback [http-nio-8083-exec-2] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 1
2026-01-13 14:22:25.920 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:22:25.920 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:22:25.920 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:25.920 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:25.961 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:22:25.961 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:22:25.961 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:22:25.961 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:25.961 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:22:25.961 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:25.965 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:22:25.965 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:22:27.918 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 14:22:27.918 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 14:22:27.918 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.169(String)
2026-01-13 14:22:27.918 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 14:22:27.929 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 0
2026-01-13 14:22:27.929 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 1
2026-01-13 14:22:27.929 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 14:22:27.929 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 14:22:27.929 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.169(String)
2026-01-13 14:22:27.929 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 14:22:27.934 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 1
2026-01-13 14:22:27.934 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 14:22:40.410 logback [http-nio-8083-exec-6] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:22:40.410 logback [http-nio-8083-exec-12] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:22:40.410 logback [http-nio-8083-exec-6] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:40.410 logback [http-nio-8083-exec-12] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:40.445 logback [http-nio-8083-exec-6] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:22:40.445 logback [http-nio-8083-exec-12] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:22:40.445 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:22:40.445 logback [http-nio-8083-exec-12] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:22:40.445 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:40.445 logback [http-nio-8083-exec-12] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:40.455 logback [http-nio-8083-exec-12] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:22:40.455 logback [http-nio-8083-exec-6] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:22:52.882 logback [http-nio-8083-exec-7] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:22:52.887 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:22:52.887 logback [http-nio-8083-exec-7] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:52.887 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:52.915 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:22:52.915 logback [http-nio-8083-exec-7] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:22:52.915 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:22:52.915 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:22:52.915 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:52.915 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:52.924 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:22:52.924 logback [http-nio-8083-exec-7] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:22:57.492 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:22:57.492 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:57.502 logback [http-nio-8083-exec-11] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:22:57.502 logback [http-nio-8083-exec-11] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:57.512 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:22:57.512 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:22:57.512 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:57.522 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:22:57.522 logback [http-nio-8083-exec-11] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:22:57.522 logback [http-nio-8083-exec-11] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:22:57.522 logback [http-nio-8083-exec-11] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:22:57.531 logback [http-nio-8083-exec-11] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:23:25.306 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? AND s.student_id = ? GROUP BY s.student_id 
2026-01-13 14:23:25.306 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String), 350721111202407050001(String)
2026-01-13 14:23:25.316 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 1
2026-01-13 14:23:25.316 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 and ID in ( ? ) ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') Limit 0,20 
2026-01-13 14:23:25.316 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 297edff89395f09c0194f2d81868005e(String), 350721111202407050001(String)
2026-01-13 14:23:25.331 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:23:25.331 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryCountMedicationRecord - ==>  Preparing: SELECT COUNT(1) FROM (select * from info_medication_record where 1=1 and ID in ( ? ) ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:25.331 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryCountMedicationRecord - ==> Parameters: 297edff89395f09c0194f2d81868005e(String), 350721111202407050001(String)
2026-01-13 14:23:25.336 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryCountMedicationRecord - <==      Total: 1
2026-01-13 14:23:30.041 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IMedicalDao.saveTaking - ==>  Preparing: INSERT INTO info_taking ( id,taking_id,sign_photo,opr_time,opr_man )VALUES ( ?,?,?,NOW(),? ) 
2026-01-13 14:23:30.042 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IMedicalDao.saveTaking - ==> Parameters: 75cb18c234d348d59eef90d108a490c520260113142330(String), 75cb18c234d348d59eef90d108a490c520260113142330(String), [B@4219a141(byte[]), 350721111202407050001(String)
2026-01-13 14:23:30.061 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IMedicalDao.saveTaking - <==    Updates: 1
2026-01-13 14:23:30.061 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.saveTakingMedication - ==>  Preparing: INSERT INTO info_taking_medicine ( taking_id, distribution_id )VALUES ( ?,? ) 
2026-01-13 14:23:30.061 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.saveTakingMedication - ==> Parameters: 75cb18c234d348d59eef90d108a490c520260113142330(String), 297edff89395f09c0194f2d81868005e(String)
2026-01-13 14:23:30.086 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.saveTakingMedication - <==    Updates: 1
2026-01-13 14:23:30.127 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:23:30.132 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:23:30.137 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:23:30.137 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:30.137 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:23:30.147 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:23:30.152 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:30.152 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:23:30.157 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:23:30.157 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:30.157 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:23:30.167 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:23:59.315 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:23:59.315 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:23:59.320 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:23:59.320 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:59.320 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:23:59.325 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:23:59.330 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:59.330 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:23:59.335 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:23:59.335 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:59.335 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:23:59.340 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:23:59.974 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:23:59.974 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:23:59.984 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:23:59.989 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:59.989 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:23:59.995 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:23:59.995 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:23:59.995 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:24:00.005 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:24:00.005 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:00.005 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:24:00.010 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:24:02.194 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:24:02.194 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:24:02.219 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:24:02.219 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:02.219 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:24:02.234 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:24:02.234 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:02.234 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:24:02.244 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:24:02.244 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:02.244 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:24:02.269 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:24:02.892 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:24:02.892 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:24:02.907 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:24:02.907 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:02.907 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:24:02.914 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:24:02.914 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:02.914 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:24:02.922 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:24:02.922 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:02.927 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:24:02.932 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:24:03.542 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:24:03.542 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:24:03.551 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:24:03.551 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:03.551 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:24:03.557 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:24:03.560 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:03.560 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:24:03.561 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:24:03.561 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:24:03.566 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:24:03.566 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:03.566 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:24:03.569 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:24:03.569 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:03.569 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:24:03.572 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:24:03.577 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:24:03.577 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:03.577 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:24:03.583 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:24:03.583 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:24:03.583 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:24:03.588 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:39:14.704 logback [http-nio-8083-exec-28] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==>  Preparing: select * from info_outdoor_menu where visible=1 order by sort asc 
2026-01-13 14:39:14.704 logback [http-nio-8083-exec-15] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==>  Preparing: UPDATE inf_room_computer_out SET current_version = ? WHERE ip_address = ? 
2026-01-13 14:39:14.704 logback [http-nio-8083-exec-29] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:39:14.704 logback [http-nio-8083-exec-28] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==> Parameters: 
2026-01-13 14:39:14.704 logback [http-nio-8083-exec-29] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:39:14.704 logback [http-nio-8083-exec-15] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==> Parameters: 97(String), 172.16.40.144(String)
2026-01-13 14:39:14.710 logback [http-nio-8083-exec-29] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 1
2026-01-13 14:39:14.711 logback [http-nio-8083-exec-29] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:39:14.711 logback [http-nio-8083-exec-29] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:39:14.713 logback [http-nio-8083-exec-15] DEBUG c.j.m.IUpgradeDao.syncOutVersion - <==    Updates: 1
2026-01-13 14:39:14.717 logback [http-nio-8083-exec-29] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:39:14.740 logback [http-nio-8083-exec-28] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - <==      Total: 12
2026-01-13 14:39:16.491 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:16.491 logback [http-nio-8083-exec-30] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:16.493 logback [http-nio-8083-exec-30] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:16.493 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:39:16.518 logback [http-nio-8083-exec-30] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 0
2026-01-13 14:39:16.518 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 0
2026-01-13 14:39:16.526 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.insertNoticeTask - ==>  Preparing: INSERT INTO info_notice_task( update_time,device_id,sync_code , prison_no, status )VALUES ( NULL ,(SELECT device_id FROM (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi ),? , ?, ? ) 
2026-01-13 14:39:16.526 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.insertNoticeTask - ==>  Preparing: INSERT INTO info_notice_task( update_time,device_id,sync_code , prison_no, status )VALUES ( NULL ,(SELECT device_id FROM (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi ),? , ?, ? ) 
2026-01-13 14:39:16.529 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.insertNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String), 350721111(String), 0(Integer)
2026-01-13 14:39:16.530 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.insertNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String), 350721111(String), 0(Integer)
2026-01-13 14:39:16.575 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.insertNoticeTask - <==    Updates: 1
2026-01-13 14:39:16.575 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.insertNoticeTask - <==    Updates: 1
2026-01-13 14:39:16.577 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:16.577 logback [http-nio-8083-exec-30] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:16.580 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:39:16.580 logback [http-nio-8083-exec-30] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:16.653 logback [http-nio-8083-exec-1] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:16.653 logback [http-nio-8083-exec-30] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:16.654 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:16.654 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:39:16.656 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 0(Integer), 1(Integer)
2026-01-13 14:39:16.656 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 0(Integer), 1(Integer)
2026-01-13 14:39:16.663 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 1
2026-01-13 14:39:16.675 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:16.688 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:16.688 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:16.688 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 3507211111(String), 2025-04-10 20:36:17(String), POLICE_SYNC(String)
2026-01-13 14:39:16.688 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202407050001(String), 2024-08-27 08:38:03(String), PRISONER_SYNC(String)
2026-01-13 14:39:16.713 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:16.723 logback [http-nio-8083-exec-1] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:19.933 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:19.933 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:19.938 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:19.939 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:19.940 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:19.949 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:19.949 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:19.950 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:19.955 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:19.955 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:19.956 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2024-08-27 08:38:03(String), 0(Integer), 1(Integer)
2026-01-13 14:39:19.962 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:19.963 logback [http-nio-8083-exec-4] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:19.963 logback [http-nio-8083-exec-4] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:39:19.968 logback [http-nio-8083-exec-4] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:19.970 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:19.970 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:19.971 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:39:19.971 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202411220001(String), 2025-02-07 17:18:06(String), PRISONER_SYNC(String)
2026-01-13 14:39:19.978 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:19.985 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:19.986 logback [http-nio-8083-exec-4] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:19.986 logback [http-nio-8083-exec-4] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:39:19.989 logback [http-nio-8083-exec-4] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:19.990 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:39:19.990 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2025-04-10 20:36:17(String), 0(Integer), 1(Integer)
2026-01-13 14:39:19.994 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 1
2026-01-13 14:39:19.998 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:19.999 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 1e28120ff1a04ccaa597fe18405abcc020241101085035(String), 2026-01-13 10:37:34(String), POLICE_SYNC(String)
2026-01-13 14:39:20.008 logback [http-nio-8083-exec-4] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:23.074 logback [http-nio-8083-exec-3] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:23.075 logback [http-nio-8083-exec-3] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:23.080 logback [http-nio-8083-exec-3] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:23.081 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:23.081 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:23.091 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:23.091 logback [http-nio-8083-exec-3] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:23.091 logback [http-nio-8083-exec-3] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:23.097 logback [http-nio-8083-exec-3] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:23.098 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:23.098 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2025-02-07 17:18:06(String), 0(Integer), 1(Integer)
2026-01-13 14:39:23.103 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:23.108 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:23.108 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202407020001(String), 2025-02-10 08:36:03(String), PRISONER_SYNC(String)
2026-01-13 14:39:23.120 logback [http-nio-8083-exec-3] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:24.719 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:24.719 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:39:24.723 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:24.724 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:24.724 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:39:24.732 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:24.732 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:24.732 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:39:24.736 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:24.736 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:39:24.737 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:39:24.740 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:39:24.740 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:24.740 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:39:24.744 logback [http-nio-8083-exec-12] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:24.745 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:24.745 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:39:24.758 logback [http-nio-8083-exec-12] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:26.230 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:26.230 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:26.236 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:26.236 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:26.236 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:26.245 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:26.246 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:26.246 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:26.252 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:26.253 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:26.253 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2025-02-10 08:36:03(String), 0(Integer), 1(Integer)
2026-01-13 14:39:26.259 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:26.263 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:26.263 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202502190002(String), 2025-02-19 18:39:30(String), PRISONER_SYNC(String)
2026-01-13 14:39:26.270 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:29.358 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:29.358 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:29.366 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:29.366 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:29.366 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:29.375 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:29.375 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:29.375 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:29.379 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:29.379 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:29.379 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2025-02-19 18:39:30(String), 0(Integer), 1(Integer)
2026-01-13 14:39:29.383 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:29.387 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:29.388 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202401310001(String), 2025-02-21 09:34:06(String), PRISONER_SYNC(String)
2026-01-13 14:39:29.395 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:32.484 logback [http-nio-8083-exec-7] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:32.485 logback [http-nio-8083-exec-7] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:32.490 logback [http-nio-8083-exec-7] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:32.492 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:32.492 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:32.502 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:32.503 logback [http-nio-8083-exec-7] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:32.504 logback [http-nio-8083-exec-7] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:32.507 logback [http-nio-8083-exec-7] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:32.507 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:32.507 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2025-02-21 09:34:06(String), 0(Integer), 1(Integer)
2026-01-13 14:39:32.513 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:32.519 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:32.519 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202412020001(String), 2025-03-02 15:56:05(String), PRISONER_SYNC(String)
2026-01-13 14:39:32.528 logback [http-nio-8083-exec-7] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:35.638 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:35.638 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:35.642 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:35.643 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:35.643 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:35.650 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:35.650 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:35.651 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:35.654 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:35.654 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:35.654 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2025-03-02 15:56:05(String), 0(Integer), 1(Integer)
2026-01-13 14:39:35.658 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:35.663 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:35.663 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202503130002(String), 2025-03-13 16:15:22(String), PRISONER_SYNC(String)
2026-01-13 14:39:35.674 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:38.768 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:38.769 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:38.773 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:38.774 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:38.774 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:38.787 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:38.787 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:38.788 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:38.791 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:38.791 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:38.791 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2025-03-13 16:15:22(String), 0(Integer), 1(Integer)
2026-01-13 14:39:38.795 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:38.802 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:38.802 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202401310001(String), 2026-01-13 09:48:28(String), PRISONER_SYNC(String)
2026-01-13 14:39:38.810 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:43.333 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:43.333 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:43.339 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:43.339 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:43.339 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:43.353 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:43.353 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:43.353 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:43.358 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:43.358 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:43.359 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 09:48:28(String), 0(Integer), 1(Integer)
2026-01-13 14:39:43.368 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:43.373 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:43.373 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202407020001(String), 2026-01-13 09:54:03(String), PRISONER_SYNC(String)
2026-01-13 14:39:43.380 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:48.130 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:48.130 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:48.135 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:48.135 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:48.135 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:48.141 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:48.141 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:48.142 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:48.146 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:48.146 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:48.147 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 09:54:03(String), 0(Integer), 1(Integer)
2026-01-13 14:39:48.151 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:48.156 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:48.156 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202407050001(String), 2026-01-13 09:56:46(String), PRISONER_SYNC(String)
2026-01-13 14:39:48.166 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:52.607 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:52.608 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:52.615 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:52.615 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:52.616 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:52.621 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:52.622 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:52.622 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:52.627 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:52.628 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:52.628 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 09:56:46(String), 0(Integer), 1(Integer)
2026-01-13 14:39:52.635 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:52.638 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:52.638 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202412020001(String), 2026-01-13 09:57:38(String), PRISONER_SYNC(String)
2026-01-13 14:39:52.646 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:39:56.994 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:56.995 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:56.999 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:39:56.999 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:56.999 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:39:57.006 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:39:57.006 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:57.007 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:39:57.013 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:39:57.014 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:39:57.014 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 09:57:38(String), 0(Integer), 1(Integer)
2026-01-13 14:39:57.018 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:39:57.023 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:39:57.023 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202502190002(String), 2026-01-13 09:58:39(String), PRISONER_SYNC(String)
2026-01-13 14:39:57.029 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:40:01.911 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:01.911 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:40:01.916 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:40:01.917 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:01.917 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:40:01.937 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:40:01.937 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:01.938 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:40:01.943 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:40:01.943 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:40:01.944 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 09:58:39(String), 0(Integer), 1(Integer)
2026-01-13 14:40:01.950 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:40:01.958 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:01.958 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202503130002(String), 2026-01-13 09:59:32(String), PRISONER_SYNC(String)
2026-01-13 14:40:01.966 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:40:02.026 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 14:40:02.026 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 14:40:02.040 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 3
2026-01-13 14:40:02.040 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 14:40:02.041 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 14:40:02.045 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 14:40:02.047 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 14:40:02.047 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 14:40:02.052 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 14:40:02.052 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 14:40:02.053 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:40:02.058 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 14:40:02.058 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 14:40:02.058 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 14:40:02.063 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 14:40:02.064 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 14:40:02.064 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 14:40:02.071 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 14:40:04.071 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 14:40:04.071 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 14:40:04.079 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 3
2026-01-13 14:40:04.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 14:40:04.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 14:40:04.085 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 14:40:04.086 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 14:40:04.087 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 14:40:04.093 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 14:40:04.093 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 14:40:04.094 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:40:04.099 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 14:40:04.099 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 14:40:04.099 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 14:40:04.102 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 14:40:04.102 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 14:40:04.103 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 14:40:04.107 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 14:40:04.107 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 14:40:04.108 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 14:40:04.111 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 14:40:05.240 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:05.240 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:40:05.246 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:40:05.246 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:05.246 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:40:05.258 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:40:05.258 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:05.259 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:40:05.267 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:40:05.269 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:40:05.269 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 09:59:32(String), 0(Integer), 1(Integer)
2026-01-13 14:40:05.275 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 1
2026-01-13 14:40:05.279 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET person_id=?, update_time = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:05.279 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.updateNoticeTime - ==> Parameters: 172.16.40.144(String), 350721111202411220001(String), 2026-01-13 10:30:10(String), PRISONER_SYNC(String)
2026-01-13 14:40:05.287 logback [http-nio-8083-exec-16] DEBUG c.j.m.IFaceDao.updateNoticeTime - <==    Updates: 1
2026-01-13 14:40:09.724 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:09.725 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:40:09.730 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:40:09.730 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:09.730 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:40:09.738 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:40:09.739 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:09.739 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:40:09.742 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:40:09.742 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:40:09.743 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:40:09.746 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:40:09.746 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:09.747 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:40:09.751 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:40:09.752 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:40:09.752 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:40:09.766 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:40:11.244 logback [http-nio-8083-exec-18] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==>  Preparing: SELECT s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_text name,item_value from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.item_value WHERE 1 = 1 AND s.student_id NOT IN ( SELECT DISTINCT o.student_id FROM info_student_outinroom o WHERE o.room_id = ? AND o.out_time IS NOT NULL AND o.back_time IS NULL ) ORDER BY s.student_no ASC 
2026-01-13 14:40:11.245 logback [http-nio-8083-exec-18] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:40:11.258 logback [http-nio-8083-exec-18] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - <==      Total: 7
2026-01-13 14:40:11.259 logback [http-nio-8083-exec-18] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==>  Preparing: SELECT date_format(so.out_time,'%Y-%m-%d %T') AS outTime, so.reson_type AS reasonType, d.item_text AS reasonTypeName,so.id as outRecordId, s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state=1 AND room_num = ?) s INNER JOIN info_student_outinroom so ON so.student_id = s.student_id AND so.room_id = ? AND (so.out_time IS NOT NULL AND so.back_time IS NULL) LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT * FROM sys_dict_item t WHERE t.dict_id = ( SELECT id FROM sys_dict p WHERE p.dict_code = 'OUT_ROOM_REASON' )) d ON d.item_value = so.reson_type LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_value val,item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.val WHERE 1 = 1 ORDER BY s.student_no ASC 
2026-01-13 14:40:11.259 logback [http-nio-8083-exec-18] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:40:11.261 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryBedInfoList - ==>  Preparing: SELECT t1.bed_id AS bedId, t1.room_id roomId, t2.room_id AS room, date_format(t4.birthday,'%Y-%m-%d') AS birthday, t4.handle_case_comp as handleCaseComp, IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ t4.native_address as nativeAddress, t1.bed_num as bedNum, t4.student_id as studentId, t3.police_id AS policeId, t4.SNBH AS studentNo, DATE_FORMAT(t4.entry_date,'%Y-%m-%d') AS entryDate, t4.litigation_code AS litigationCode, t4.litigation_name AS litigationName, t4.involved_type as involvedType, t4.involved_type AS involvedName, t4.briefly_case AS brieflyCase, t4.name, t4.state, t5.name AS stateName, risk.all_risk_level AS riskLevel, bahj.`name` as bahjName /*办案环节*/ from (SELECT * FROM info_bed WHERE room_id = ?) t1 LEFT JOIN inf_monitor_room t2 on t1.room_id=t2.id LEFT JOIN info_bed_arrangement t3 on t1.bed_id=t3.bed_id AND t3.student_id != '-1' AND t3.operation_type=0 LEFT JOIN info_student t4 on t3.student_id=t4.student_id AND t4.state = 1 and t4.room_num = ? LEFT JOIN (SELECT item_text name,item_value val FROM sys_dict_item WHERE dict_id=(SELECT id FROM sys_dict WHERE dict_code='STUDENT_STATE')) t5 ON t4.state=t5.val LEFT JOIN info_student_levelrisk risk ON t4.student_id = risk.student_id LEFT JOIN (SELECT item_text name,item_value val FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE') ) bahj on bahj.val = t4.hand_case LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = t4.place_domicile where 1 = 1 GROUP BY t1.bed_id ORDER BY t1.bed_num+0 asc 
2026-01-13 14:40:11.262 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryBedInfoList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:40:11.268 logback [http-nio-8083-exec-18] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - <==      Total: 0
2026-01-13 14:40:11.273 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryBedInfoList - <==      Total: 20
2026-01-13 14:40:11.283 logback [http-nio-8083-exec-20] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - ==>  Preparing: select group_concat(studentNo separator ';') as studentNo,group_concat(stuName separator ';') as stuName,cast(time_range as char) as time_range from (select (select student_no from info_student where student_id=t1.student_id and room_num = t1.room_id) studentNo, (select `name` from info_student where student_id=t1.student_id and room_num = t1.room_id) stuName, CONCAT(t3.start_time,'-',t3.end_time) as time_range from info_duty_schedule_setting t3 left JOIN (select * from info_duty_adjust where room_id=? and operation_type=0 and duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END))t1 on t1.setting_id=t3.setting_id where start_time is not NULL )t GROUP BY t.time_range; 
2026-01-13 14:40:11.284 logback [http-nio-8083-exec-20] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.289 logback [http-nio-8083-exec-20] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - <==      Total: 5
2026-01-13 14:40:11.305 logback [http-nio-8083-exec-21] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - ==>  Preparing: select t1.id as roomId,t1.room_id as roomNo,t1.room_name as roomName,t2.groupname as groupName from inf_monitor_room t1,inf_monitor_roomgroup t2 where t1.group_id=t2.id and t1.id=? 
2026-01-13 14:40:11.305 logback [http-nio-8083-exec-21] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.310 logback [http-nio-8083-exec-21] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - <==      Total: 1
2026-01-13 14:40:11.311 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobSetInfoList - ==>  Preparing: select t.setting_id settingId,t.setting_name settingName,t.order_num as ordNum from info_job_settings t ORDER BY order_num asc 
2026-01-13 14:40:11.311 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobSetInfoList - ==> Parameters: 
2026-01-13 14:40:11.317 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobSetInfoList - <==      Total: 6
2026-01-13 14:40:11.318 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:40:11.318 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), d24825d6ab2548fda0c53da790a3c33b20250227143032(String)
2026-01-13 14:40:11.340 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 14:40:11.340 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:40:11.340 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), 0f7eb044dd52475eb630f973c5085eb820250227143049(String)
2026-01-13 14:40:11.344 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 14:40:11.344 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:40:11.344 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), 1e9dd0c5a5314c58b5b9b4fd056529fc20250227143124(String)
2026-01-13 14:40:11.349 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 14:40:11.350 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:40:11.350 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), 4f8b5217d1034fa3b0ccdf15c185cdf820250227143506(String)
2026-01-13 14:40:11.355 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 14:40:11.356 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:40:11.356 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), b61d148453964a1b9f2c49280ba7e3f220250227143236(String)
2026-01-13 14:40:11.361 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 14:40:11.361 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:40:11.361 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199996(String), 848b0eea8b044781be16e45eb625fdb320250227143253(String)
2026-01-13 14:40:11.366 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 2
2026-01-13 14:40:11.421 logback [http-nio-8083-exec-22] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:40:11.423 logback [http-nio-8083-exec-22] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.445 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:40:11.445 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.455 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:40:11.455 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:40:11.455 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:40:11.461 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:40:11.462 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:40:11.462 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:40:11.470 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:40:11.471 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:40:11.471 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:40:11.472 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:40:11.473 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.476 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:40:11.481 logback [http-nio-8083-exec-22] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:40:11.481 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:40:11.482 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.488 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:40:11.489 logback [http-nio-8083-exec-26] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:40:11.489 logback [http-nio-8083-exec-26] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.490 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:40:11.491 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.493 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:40:11.493 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:40:11.494 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.500 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:40:11.516 logback [http-nio-8083-exec-26] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:40:11.516 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:40:11.516 logback [http-nio-8083-exec-26] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:40:11.516 logback [http-nio-8083-exec-25] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:40:11.516 logback [http-nio-8083-exec-26] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.517 logback [http-nio-8083-exec-25] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.523 logback [http-nio-8083-exec-26] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:40:11.523 logback [http-nio-8083-exec-25] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:40:11.970 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:40:11.971 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:11.998 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:40:12.000 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:40:12.000 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:12.007 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:40:12.040 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:40:12.041 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:40:12.050 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:40:12.116 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 14:40:12.118 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.144(String)
2026-01-13 14:40:12.130 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 1
2026-01-13 14:40:12.131 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 14:40:12.132 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.144(String)
2026-01-13 14:40:12.153 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 14:40:12.601 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryPatrolRecords - ==>  Preparing: select item_text name,item_value val from sys_dict_item where dict_id='5234' and status=1 
2026-01-13 14:40:12.601 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryPatrolRecords - ==> Parameters: 
2026-01-13 14:40:12.606 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryPatrolRecords - <==      Total: 7
2026-01-13 14:40:20.793 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.queryExistFailResult - ==>  Preparing: SELECT * FROM info_input_photo_fail WHERE person_id = ? 
2026-01-13 14:40:20.793 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.queryExistFailResult - ==> Parameters: 3507211111(String)
2026-01-13 14:40:20.798 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.queryExistFailResult - <==      Total: 1
2026-01-13 14:40:20.802 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.updateExistFailResult - ==>  Preparing: UPDATE info_input_photo_fail SET update_time = SYSDATE() WHERE person_id = ? 
2026-01-13 14:40:20.803 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.updateExistFailResult - ==> Parameters: 3507211111(String)
2026-01-13 14:40:20.811 logback [http-nio-8083-exec-30] DEBUG c.j.m.IFaceDao.updateExistFailResult - <==    Updates: 1
2026-01-13 14:40:42.323 logback [http-nio-8083-exec-2] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:40:42.323 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:40:42.323 logback [http-nio-8083-exec-2] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:42.324 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:42.359 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:40:42.359 logback [http-nio-8083-exec-2] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:40:42.360 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:40:42.360 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:40:42.360 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:42.360 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:40:42.365 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:40:42.365 logback [http-nio-8083-exec-2] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:50:56.612 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 14:50:56.613 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.144(String)
2026-01-13 14:50:56.638 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 2
2026-01-13 14:50:56.638 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 14:50:56.639 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.144(String)
2026-01-13 14:50:56.652 logback [nioEventLoopGroup-3-3] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 14:52:08.727 logback [http-nio-8083-exec-10] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==>  Preparing: select * from info_outdoor_menu where visible=1 order by sort asc 
2026-01-13 14:52:08.728 logback [http-nio-8083-exec-10] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==> Parameters: 
2026-01-13 14:52:08.753 logback [http-nio-8083-exec-10] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - <==      Total: 12
2026-01-13 14:52:08.783 logback [http-nio-8083-exec-5] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:52:08.783 logback [http-nio-8083-exec-5] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:08.785 logback [http-nio-8083-exec-11] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==>  Preparing: UPDATE inf_room_computer_out SET current_version = ? WHERE ip_address = ? 
2026-01-13 14:52:08.785 logback [http-nio-8083-exec-11] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==> Parameters: 97(String), 172.16.40.144(String)
2026-01-13 14:52:08.788 logback [http-nio-8083-exec-5] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:52:08.789 logback [http-nio-8083-exec-5] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:52:08.789 logback [http-nio-8083-exec-5] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:08.793 logback [http-nio-8083-exec-11] DEBUG c.j.m.IUpgradeDao.syncOutVersion - <==    Updates: 2
2026-01-13 14:52:08.795 logback [http-nio-8083-exec-5] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:52:17.266 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.266 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:17.272 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:17.273 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.274 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.274 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:17.274 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:17.281 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:17.281 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.282 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:52:17.282 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:17.282 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.282 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:17.285 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:17.285 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:52:17.285 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:52:17.288 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:17.288 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.288 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:17.290 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:52:17.290 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.290 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:17.293 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:17.293 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:17.294 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:52:17.294 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.294 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:52:17.294 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:17.298 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:52:17.298 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.299 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:17.302 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:17.303 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:17.416 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:17.417 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:52:17.428 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:18.715 logback [http-nio-8083-exec-27] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==>  Preparing: SELECT s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_text name,item_value from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.item_value WHERE 1 = 1 AND s.student_id NOT IN ( SELECT DISTINCT o.student_id FROM info_student_outinroom o WHERE o.room_id = ? AND o.out_time IS NOT NULL AND o.back_time IS NULL ) ORDER BY s.student_no ASC 
2026-01-13 14:52:18.716 logback [http-nio-8083-exec-27] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:52:18.724 logback [http-nio-8083-exec-27] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - <==      Total: 5
2026-01-13 14:52:18.724 logback [http-nio-8083-exec-27] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==>  Preparing: SELECT date_format(so.out_time,'%Y-%m-%d %T') AS outTime, so.reson_type AS reasonType, d.item_text AS reasonTypeName,so.id as outRecordId, s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state=1 AND room_num = ?) s INNER JOIN info_student_outinroom so ON so.student_id = s.student_id AND so.room_id = ? AND (so.out_time IS NOT NULL AND so.back_time IS NULL) LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT * FROM sys_dict_item t WHERE t.dict_id = ( SELECT id FROM sys_dict p WHERE p.dict_code = 'OUT_ROOM_REASON' )) d ON d.item_value = so.reson_type LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_value val,item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.val WHERE 1 = 1 ORDER BY s.student_no ASC 
2026-01-13 14:52:18.725 logback [http-nio-8083-exec-27] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:52:18.730 logback [http-nio-8083-exec-27] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - <==      Total: 0
2026-01-13 14:52:18.733 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryBedInfoList - ==>  Preparing: SELECT t1.bed_id AS bedId, t1.room_id roomId, t2.room_id AS room, date_format(t4.birthday,'%Y-%m-%d') AS birthday, t4.handle_case_comp as handleCaseComp, IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ t4.native_address as nativeAddress, t1.bed_num as bedNum, t4.student_id as studentId, t3.police_id AS policeId, t4.SNBH AS studentNo, DATE_FORMAT(t4.entry_date,'%Y-%m-%d') AS entryDate, t4.litigation_code AS litigationCode, t4.litigation_name AS litigationName, t4.involved_type as involvedType, t4.involved_type AS involvedName, t4.briefly_case AS brieflyCase, t4.name, t4.state, t5.name AS stateName, risk.all_risk_level AS riskLevel, bahj.`name` as bahjName /*办案环节*/ from (SELECT * FROM info_bed WHERE room_id = ?) t1 LEFT JOIN inf_monitor_room t2 on t1.room_id=t2.id LEFT JOIN info_bed_arrangement t3 on t1.bed_id=t3.bed_id AND t3.student_id != '-1' AND t3.operation_type=0 LEFT JOIN info_student t4 on t3.student_id=t4.student_id AND t4.state = 1 and t4.room_num = ? LEFT JOIN (SELECT item_text name,item_value val FROM sys_dict_item WHERE dict_id=(SELECT id FROM sys_dict WHERE dict_code='STUDENT_STATE')) t5 ON t4.state=t5.val LEFT JOIN info_student_levelrisk risk ON t4.student_id = risk.student_id LEFT JOIN (SELECT item_text name,item_value val FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE') ) bahj on bahj.val = t4.hand_case LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = t4.place_domicile where 1 = 1 GROUP BY t1.bed_id ORDER BY t1.bed_num+0 asc 
2026-01-13 14:52:18.734 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryBedInfoList - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:52:18.743 logback [http-nio-8083-exec-16] DEBUG c.j.m.I.queryBedInfoList - <==      Total: 20
2026-01-13 14:52:18.752 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - ==>  Preparing: select group_concat(studentNo separator ';') as studentNo,group_concat(stuName separator ';') as stuName,cast(time_range as char) as time_range from (select (select student_no from info_student where student_id=t1.student_id and room_num = t1.room_id) studentNo, (select `name` from info_student where student_id=t1.student_id and room_num = t1.room_id) stuName, CONCAT(t3.start_time,'-',t3.end_time) as time_range from info_duty_schedule_setting t3 left JOIN (select * from info_duty_adjust where room_id=? and operation_type=0 and duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END))t1 on t1.setting_id=t3.setting_id where start_time is not NULL )t GROUP BY t.time_range; 
2026-01-13 14:52:18.752 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.759 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - <==      Total: 5
2026-01-13 14:52:18.776 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - ==>  Preparing: select t1.id as roomId,t1.room_id as roomNo,t1.room_name as roomName,t2.groupname as groupName from inf_monitor_room t1,inf_monitor_roomgroup t2 where t1.group_id=t2.id and t1.id=? 
2026-01-13 14:52:18.777 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.780 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - <==      Total: 1
2026-01-13 14:52:18.781 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobSetInfoList - ==>  Preparing: select t.setting_id settingId,t.setting_name settingName,t.order_num as ordNum from info_job_settings t ORDER BY order_num asc 
2026-01-13 14:52:18.781 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobSetInfoList - ==> Parameters: 
2026-01-13 14:52:18.784 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobSetInfoList - <==      Total: 6
2026-01-13 14:52:18.784 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:52:18.784 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), d24825d6ab2548fda0c53da790a3c33b20250227143032(String)
2026-01-13 14:52:18.788 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:52:18.788 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:52:18.788 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), 0f7eb044dd52475eb630f973c5085eb820250227143049(String)
2026-01-13 14:52:18.791 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:52:18.792 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:52:18.792 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), 1e9dd0c5a5314c58b5b9b4fd056529fc20250227143124(String)
2026-01-13 14:52:18.797 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:52:18.797 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:52:18.797 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), 4f8b5217d1034fa3b0ccdf15c185cdf820250227143506(String)
2026-01-13 14:52:18.801 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:52:18.801 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:52:18.801 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), b61d148453964a1b9f2c49280ba7e3f220250227143236(String)
2026-01-13 14:52:18.805 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:52:18.805 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:52:18.805 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), 848b0eea8b044781be16e45eb625fdb320250227143253(String)
2026-01-13 14:52:18.813 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:52:18.902 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:18.903 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.927 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:52:18.928 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.933 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 1
2026-01-13 14:52:18.933 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:52:18.933 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202503040005(String)
2026-01-13 14:52:18.939 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 2
2026-01-13 14:52:18.954 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:18.955 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.956 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:18.957 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.965 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:52:18.966 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:18.966 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.973 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:18.983 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:52:18.984 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:18.984 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:52:18.984 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.984 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:18.985 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:18.992 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:18.992 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:19.007 logback [http-nio-8083-exec-22] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:19.008 logback [http-nio-8083-exec-22] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:19.025 logback [http-nio-8083-exec-22] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:52:19.025 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:19.026 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:19.032 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:19.473 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:19.473 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:19.493 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:52:19.494 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:19.495 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:19.500 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:19.536 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:52:19.538 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:52:19.546 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:52:19.672 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 14:52:19.672 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.144(String)
2026-01-13 14:52:19.682 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 2
2026-01-13 14:52:19.682 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 14:52:19.682 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.144(String)
2026-01-13 14:52:19.690 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 14:52:20.090 logback [http-nio-8083-exec-26] DEBUG c.j.m.I.queryPatrolRecords - ==>  Preparing: select item_text name,item_value val from sys_dict_item where dict_id='5234' and status=1 
2026-01-13 14:52:20.090 logback [http-nio-8083-exec-26] DEBUG c.j.m.I.queryPatrolRecords - ==> Parameters: 
2026-01-13 14:52:20.097 logback [http-nio-8083-exec-26] DEBUG c.j.m.I.queryPatrolRecords - <==      Total: 7
2026-01-13 14:52:32.720 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.720 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:32.724 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:32.724 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.725 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:32.725 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.725 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:32.727 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:32.728 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.728 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:52:32.731 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:32.731 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.731 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:32.735 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:32.735 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:32.735 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.735 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:32.735 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:52:32.736 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:52:32.739 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:32.739 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:52:32.739 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:52:32.739 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:52:32.740 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.740 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:32.743 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:52:32.743 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.743 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:32.744 logback [http-nio-8083-exec-15] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:32.745 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.745 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:32.747 logback [http-nio-8083-exec-29] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:32.748 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:32.749 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:52:32.755 logback [http-nio-8083-exec-15] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:32.758 logback [http-nio-8083-exec-29] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:32.786 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:52:32.787 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:32.791 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:32.792 logback [http-nio-8083-exec-30] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:52:32.792 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:32.792 logback [http-nio-8083-exec-30] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:52:32.792 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:52:32.792 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:52:32.793 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:32.799 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:52:32.824 logback [http-nio-8083-exec-1] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:52:32.825 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:32.825 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:32.829 logback [http-nio-8083-exec-30] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:52:32.831 logback [http-nio-8083-exec-1] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:34.154 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.154 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:34.161 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:34.162 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.162 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:34.167 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.167 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:34.172 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:34.172 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.173 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:34.174 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:34.174 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.174 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:52:34.177 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:34.177 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:52:34.178 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:52:34.182 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:34.183 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.183 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:52:34.183 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:34.183 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.183 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:34.188 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:34.188 logback [http-nio-8083-exec-2] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:34.188 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:52:34.188 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.189 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:52:34.189 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:34.192 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:52:34.192 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.192 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:34.196 logback [http-nio-8083-exec-2] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:34.196 logback [http-nio-8083-exec-6] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:34.196 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:34.196 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:52:34.205 logback [http-nio-8083-exec-6] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:34.219 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:34.219 logback [http-nio-8083-exec-12] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:52:34.219 logback [http-nio-8083-exec-4] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:52:34.219 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:34.219 logback [http-nio-8083-exec-12] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:52:34.219 logback [http-nio-8083-exec-4] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:34.232 logback [http-nio-8083-exec-12] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:52:34.232 logback [http-nio-8083-exec-4] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:52:34.232 logback [http-nio-8083-exec-4] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:52:34.233 logback [http-nio-8083-exec-4] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:34.237 logback [http-nio-8083-exec-4] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:52:34.247 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:52:34.248 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:34.248 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:34.256 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:35.097 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.097 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:35.103 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:35.103 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.104 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:35.105 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.105 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:35.108 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:35.108 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.108 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:52:35.112 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:35.112 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.112 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:35.116 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:35.116 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:52:35.116 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:52:35.117 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:35.117 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.117 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:35.120 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:52:35.120 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:35.120 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.120 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:52:35.120 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:35.120 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:52:35.124 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:52:35.125 logback [http-nio-8083-exec-8] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:35.125 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.125 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.125 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:35.125 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:35.130 logback [http-nio-8083-exec-9] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:35.131 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:35.131 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:52:35.134 logback [http-nio-8083-exec-8] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:35.139 logback [http-nio-8083-exec-9] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:35.161 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:52:35.162 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:35.163 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:35.163 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:35.166 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:52:35.167 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:52:35.167 logback [http-nio-8083-exec-11] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:52:35.167 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:35.167 logback [http-nio-8083-exec-11] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:52:35.172 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:52:35.176 logback [http-nio-8083-exec-11] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:52:35.181 logback [http-nio-8083-exec-10] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:52:35.181 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:35.182 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:35.186 logback [http-nio-8083-exec-10] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:36.354 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.354 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:36.361 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.361 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:36.361 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:36.361 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.361 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:36.370 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:36.370 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.371 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:52:36.375 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:36.377 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.377 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:36.379 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:36.379 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.379 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:36.381 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:36.381 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:36.381 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:52:36.382 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:52:36.382 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:52:36.382 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:52:36.385 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:52:36.385 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.385 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:36.385 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:52:36.385 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.385 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:36.388 logback [http-nio-8083-exec-13] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:36.388 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.388 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:52:36.388 logback [http-nio-8083-exec-5] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:36.389 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:36.389 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:36.394 logback [http-nio-8083-exec-13] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:36.395 logback [http-nio-8083-exec-5] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:36.417 logback [http-nio-8083-exec-14] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:52:36.417 logback [http-nio-8083-exec-16] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:52:36.417 logback [http-nio-8083-exec-27] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:36.417 logback [http-nio-8083-exec-14] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:36.418 logback [http-nio-8083-exec-27] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:36.418 logback [http-nio-8083-exec-16] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:52:36.423 logback [http-nio-8083-exec-14] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:52:36.424 logback [http-nio-8083-exec-14] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:52:36.424 logback [http-nio-8083-exec-14] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:36.427 logback [http-nio-8083-exec-14] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:52:36.427 logback [http-nio-8083-exec-16] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:52:36.437 logback [http-nio-8083-exec-27] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:52:36.437 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:36.438 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:36.443 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:38.134 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.134 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:38.138 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:38.139 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.140 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:38.141 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.141 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:38.146 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:38.146 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.146 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:52:38.148 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:38.148 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.148 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:38.153 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:38.154 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:38.154 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.154 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:52:38.154 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:38.154 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:52:38.158 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:38.158 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:52:38.158 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:52:38.158 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.159 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:52:38.159 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:38.164 logback [http-nio-8083-exec-17] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:38.164 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:52:38.165 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.165 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.165 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:38.166 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:38.168 logback [http-nio-8083-exec-18] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:38.169 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:38.169 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:52:38.171 logback [http-nio-8083-exec-17] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:38.175 logback [http-nio-8083-exec-18] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:38.189 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:52:38.189 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:38.194 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:52:38.194 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:52:38.194 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:38.194 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:52:38.195 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:38.195 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:52:38.195 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:38.202 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:52:38.202 logback [http-nio-8083-exec-20] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:52:38.218 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:52:38.219 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:38.219 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:52:38.224 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:39.376 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.376 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:39.381 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:39.383 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.383 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.383 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:39.383 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:39.386 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:39.387 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.387 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:52:39.390 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:39.390 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.390 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:39.393 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:39.393 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.393 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:39.393 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:39.394 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:52:39.394 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:52:39.396 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:52:39.397 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:52:39.397 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:52:39.397 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:52:39.398 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.398 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 14:52:39.400 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:52:39.400 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.401 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 14:52:39.401 logback [http-nio-8083-exec-23] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:39.401 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.402 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:52:39.404 logback [http-nio-8083-exec-22] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:52:39.404 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:52:39.404 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.144(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:52:39.409 logback [http-nio-8083-exec-23] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:39.413 logback [http-nio-8083-exec-22] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:52:39.432 logback [http-nio-8083-exec-26] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:52:39.432 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:52:39.433 logback [http-nio-8083-exec-26] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:39.432 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:39.433 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:52:39.433 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:39.438 logback [http-nio-8083-exec-26] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:52:39.438 logback [http-nio-8083-exec-26] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:52:39.438 logback [http-nio-8083-exec-26] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 14:52:39.442 logback [http-nio-8083-exec-26] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:52:39.443 logback [http-nio-8083-exec-25] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:52:39.458 logback [http-nio-8083-exec-24] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:52:39.459 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:39.459 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:39.463 logback [http-nio-8083-exec-24] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:45.265 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:45.266 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:45.278 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:52:45.279 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:45.285 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:52:45.285 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:45.285 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:45.291 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:45.299 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:52:45.299 logback [http-nio-8083-exec-29] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:52:45.299 logback [http-nio-8083-exec-29] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:45.307 logback [http-nio-8083-exec-29] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:52:47.675 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:52:47.676 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:47.682 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:52:47.682 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:52:47.682 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:52:47.688 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:52:47.688 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:52:47.688 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:52:47.694 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:52:47.694 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:52:47.694 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:52:47.700 logback [http-nio-8083-exec-28] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:52:48.429 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:52:48.429 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199996(String)
2026-01-13 14:52:48.438 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 3
2026-01-13 14:52:48.438 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:52:48.439 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202407050001(String)
2026-01-13 14:52:48.450 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 3
2026-01-13 14:52:48.450 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:52:48.450 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202401310001(String)
2026-01-13 14:52:48.455 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 1
2026-01-13 14:52:48.456 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:52:48.456 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202411220001(String)
2026-01-13 14:52:48.463 logback [http-nio-8083-exec-30] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 4
2026-01-13 14:53:47.553 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 14:53:47.553 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.134(String)
2026-01-13 14:53:47.561 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 2
2026-01-13 14:53:47.561 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 14:53:47.561 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.134(String)
2026-01-13 14:53:47.568 logback [nioEventLoopGroup-3-1] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 14:55:04.305 logback [http-nio-8083-exec-9] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==>  Preparing: select * from info_outdoor_menu where visible=1 order by sort asc 
2026-01-13 14:55:04.305 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:55:04.305 logback [http-nio-8083-exec-8] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==>  Preparing: UPDATE inf_room_computer_out SET current_version = ? WHERE ip_address = ? 
2026-01-13 14:55:04.305 logback [http-nio-8083-exec-9] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - ==> Parameters: 
2026-01-13 14:55:04.306 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.134(String)
2026-01-13 14:55:04.306 logback [http-nio-8083-exec-8] DEBUG c.j.m.IUpgradeDao.syncOutVersion - ==> Parameters: 97(String), 172.16.40.134(String)
2026-01-13 14:55:04.313 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:55:04.313 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:55:04.314 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.134(String)
2026-01-13 14:55:04.315 logback [http-nio-8083-exec-8] DEBUG c.j.m.IUpgradeDao.syncOutVersion - <==    Updates: 2
2026-01-13 14:55:04.318 logback [http-nio-8083-exec-7] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:55:04.320 logback [http-nio-8083-exec-9] DEBUG c.j.m.IMenuDao.queryOutRoomMenu - <==      Total: 12
2026-01-13 14:55:08.947 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.948 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 14:55:08.956 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.956 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:55:08.956 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.956 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 14:55:08.956 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:55:08.961 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:55:08.961 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.962 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:55:08.966 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:55:08.967 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.967 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 14:55:08.970 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:55:08.970 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:55:08.970 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:55:08.972 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:55:08.972 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.972 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 14:55:08.975 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:55:08.976 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:55:08.976 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.976 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:55:08.976 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 14:55:08.976 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:55:08.979 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:55:08.979 logback [http-nio-8083-exec-11] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:55:08.979 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.979 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.979 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 14:55:08.979 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:55:08.984 logback [http-nio-8083-exec-10] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:55:08.984 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:08.984 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:55:08.988 logback [http-nio-8083-exec-11] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:55:08.990 logback [http-nio-8083-exec-10] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:55:10.458 logback [http-nio-8083-exec-13] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==>  Preparing: SELECT s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_text name,item_value from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.item_value WHERE 1 = 1 AND s.student_id NOT IN ( SELECT DISTINCT o.student_id FROM info_student_outinroom o WHERE o.room_id = ? AND o.out_time IS NOT NULL AND o.back_time IS NULL ) ORDER BY s.student_no ASC 
2026-01-13 14:55:10.459 logback [http-nio-8083-exec-13] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:55:10.466 logback [http-nio-8083-exec-13] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - <==      Total: 5
2026-01-13 14:55:10.467 logback [http-nio-8083-exec-13] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==>  Preparing: SELECT date_format(so.out_time,'%Y-%m-%d %T') AS outTime, so.reson_type AS reasonType, d.item_text AS reasonTypeName,so.id as outRecordId, s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state=1 AND room_num = ?) s INNER JOIN info_student_outinroom so ON so.student_id = s.student_id AND so.room_id = ? AND (so.out_time IS NOT NULL AND so.back_time IS NULL) LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT * FROM sys_dict_item t WHERE t.dict_id = ( SELECT id FROM sys_dict p WHERE p.dict_code = 'OUT_ROOM_REASON' )) d ON d.item_value = so.reson_type LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_value val,item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.val WHERE 1 = 1 ORDER BY s.student_no ASC 
2026-01-13 14:55:10.467 logback [http-nio-8083-exec-13] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:55:10.471 logback [http-nio-8083-exec-13] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - <==      Total: 0
2026-01-13 14:55:10.508 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryBedInfoList - ==>  Preparing: SELECT t1.bed_id AS bedId, t1.room_id roomId, t2.room_id AS room, date_format(t4.birthday,'%Y-%m-%d') AS birthday, t4.handle_case_comp as handleCaseComp, IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ t4.native_address as nativeAddress, t1.bed_num as bedNum, t4.student_id as studentId, t3.police_id AS policeId, t4.SNBH AS studentNo, DATE_FORMAT(t4.entry_date,'%Y-%m-%d') AS entryDate, t4.litigation_code AS litigationCode, t4.litigation_name AS litigationName, t4.involved_type as involvedType, t4.involved_type AS involvedName, t4.briefly_case AS brieflyCase, t4.name, t4.state, t5.name AS stateName, risk.all_risk_level AS riskLevel, bahj.`name` as bahjName /*办案环节*/ from (SELECT * FROM info_bed WHERE room_id = ?) t1 LEFT JOIN inf_monitor_room t2 on t1.room_id=t2.id LEFT JOIN info_bed_arrangement t3 on t1.bed_id=t3.bed_id AND t3.student_id != '-1' AND t3.operation_type=0 LEFT JOIN info_student t4 on t3.student_id=t4.student_id AND t4.state = 1 and t4.room_num = ? LEFT JOIN (SELECT item_text name,item_value val FROM sys_dict_item WHERE dict_id=(SELECT id FROM sys_dict WHERE dict_code='STUDENT_STATE')) t5 ON t4.state=t5.val LEFT JOIN info_student_levelrisk risk ON t4.student_id = risk.student_id LEFT JOIN (SELECT item_text name,item_value val FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE') ) bahj on bahj.val = t4.hand_case LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = t4.place_domicile where 1 = 1 GROUP BY t1.bed_id ORDER BY t1.bed_num+0 asc 
2026-01-13 14:55:10.508 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryBedInfoList - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:55:10.514 logback [http-nio-8083-exec-5] DEBUG c.j.m.I.queryBedInfoList - <==      Total: 20
2026-01-13 14:55:10.557 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - ==>  Preparing: select group_concat(studentNo separator ';') as studentNo,group_concat(stuName separator ';') as stuName,cast(time_range as char) as time_range from (select (select student_no from info_student where student_id=t1.student_id and room_num = t1.room_id) studentNo, (select `name` from info_student where student_id=t1.student_id and room_num = t1.room_id) stuName, CONCAT(t3.start_time,'-',t3.end_time) as time_range from info_duty_schedule_setting t3 left JOIN (select * from info_duty_adjust where room_id=? and operation_type=0 and duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END))t1 on t1.setting_id=t3.setting_id where start_time is not NULL )t GROUP BY t.time_range; 
2026-01-13 14:55:10.557 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.562 logback [http-nio-8083-exec-16] DEBUG c.j.mysqldao.IDutyInfoDao.queryDuty - <==      Total: 5
2026-01-13 14:55:10.609 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - ==>  Preparing: select t1.id as roomId,t1.room_id as roomNo,t1.room_name as roomName,t2.groupname as groupName from inf_monitor_room t1,inf_monitor_roomgroup t2 where t1.group_id=t2.id and t1.id=? 
2026-01-13 14:55:10.609 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.614 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IDutyInfoDao.queryRoom - <==      Total: 1
2026-01-13 14:55:10.614 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobSetInfoList - ==>  Preparing: select t.setting_id settingId,t.setting_name settingName,t.order_num as ordNum from info_job_settings t ORDER BY order_num asc 
2026-01-13 14:55:10.615 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobSetInfoList - ==> Parameters: 
2026-01-13 14:55:10.619 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobSetInfoList - <==      Total: 6
2026-01-13 14:55:10.620 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:55:10.620 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), d24825d6ab2548fda0c53da790a3c33b20250227143032(String)
2026-01-13 14:55:10.624 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:55:10.624 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:55:10.624 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), 0f7eb044dd52475eb630f973c5085eb820250227143049(String)
2026-01-13 14:55:10.628 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:55:10.628 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:55:10.628 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), 1e9dd0c5a5314c58b5b9b4fd056529fc20250227143124(String)
2026-01-13 14:55:10.631 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:55:10.631 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:55:10.631 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), 4f8b5217d1034fa3b0ccdf15c185cdf820250227143506(String)
2026-01-13 14:55:10.634 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:55:10.635 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:55:10.635 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), b61d148453964a1b9f2c49280ba7e3f220250227143236(String)
2026-01-13 14:55:10.637 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:55:10.638 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==>  Preparing: SELECT t1.setting_id settingId,t1.student_id studentId,IFNULL(t2.name,'') AS name,t2.state, (CASE t2.state WHEN 1 THEN '在所' WHEN 2 THEN '离所' WHEN 3 THEN '拒收' WHEN 9 THEN '删除' ELSE '(在所)' END) AS stateName FROM info_job t1,info_student t2 WHERE t1.student_id = t2.student_id and t1.room_id = t2.room_num AND t1.room_id=? AND t1.setting_id=? AND operation_type=0 
2026-01-13 14:55:10.638 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - ==> Parameters: 35072111199995(String), 848b0eea8b044781be16e45eb625fdb320250227143253(String)
2026-01-13 14:55:10.641 logback [http-nio-8083-exec-14] DEBUG c.j.m.I.queryJobInfoList - <==      Total: 0
2026-01-13 14:55:10.782 logback [http-nio-8083-exec-27] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:55:10.782 logback [http-nio-8083-exec-27] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.815 logback [http-nio-8083-exec-27] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:55:10.816 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:55:10.816 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.822 logback [http-nio-8083-exec-27] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:55:10.844 logback [http-nio-8083-exec-17] DEBUG c.j.m.I.queryTakeMedicinePersons - ==>  Preparing: SELECT s.student_id AS studentId, s.name, s.student_no AS studentNo, s.room_num AS roomId, s.id_card_no AS idCardNo, IFNULL( slr.all_risk_level, -1 ) AS riskLevel FROM info_student s INNER JOIN (select * from info_medication_record where if_stop_take=0 and finish_date > DATE_FORMAT(now(),'%Y-%m-%d %T'))mr ON s.student_id = mr.student_id LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id WHERE s.state=1 AND s.room_num = ? GROUP BY s.student_id 
2026-01-13 14:55:10.845 logback [http-nio-8083-exec-17] DEBUG c.j.m.I.queryTakeMedicinePersons - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.850 logback [http-nio-8083-exec-17] DEBUG c.j.m.I.queryTakeMedicinePersons - <==      Total: 1
2026-01-13 14:55:10.850 logback [http-nio-8083-exec-17] DEBUG c.j.m.I.queryMedicationRecord - ==>  Preparing: SELECT mr.ID as id, mr.drug_id AS drugId, mr.instructions, mr.release_man AS releaseMan, mr.release_time AS releaseTime, IFNULL(DATE_FORMAT(mr.finish_date,'%Y-%m-%d'),'长期服药') AS dueDate, sd.`name` AS drugName,opr_time as oprTime FROM (select * from info_medication_record where 1=1 ) mr INNER JOIN info_student_drug sd ON mr.drug_id = sd.id LEFT JOIN (SELECT distribution_id,opr_time FROM info_taking it LEFT JOIN info_taking_medicine itm ON it.taking_id=itm.taking_id) tr ON tr.distribution_id = mr.ID WHERE mr.student_id = ? and mr.if_stop_take=0 and mr.finish_date >= DATE_FORMAT(now(),'%Y-%m-%d %T') 
2026-01-13 14:55:10.850 logback [http-nio-8083-exec-17] DEBUG c.j.m.I.queryMedicationRecord - ==> Parameters: 350721111202503040005(String)
2026-01-13 14:55:10.857 logback [http-nio-8083-exec-17] DEBUG c.j.m.I.queryMedicationRecord - <==      Total: 2
2026-01-13 14:55:10.901 logback [http-nio-8083-exec-18] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:55:10.902 logback [http-nio-8083-exec-18] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.908 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:55:10.909 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.914 logback [http-nio-8083-exec-20] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:55:10.914 logback [http-nio-8083-exec-20] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.923 logback [http-nio-8083-exec-18] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:55:10.923 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:55:10.923 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.930 logback [http-nio-8083-exec-18] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:55:10.930 logback [http-nio-8083-exec-21] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:55:10.931 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:55:10.931 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.935 logback [http-nio-8083-exec-21] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:55:10.938 logback [http-nio-8083-exec-20] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:55:10.938 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:55:10.938 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:10.945 logback [http-nio-8083-exec-20] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:55:11.516 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 14:55:11.516 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 14:55:11.525 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 2
2026-01-13 14:55:11.525 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 14:55:11.525 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.134(String)
2026-01-13 14:55:11.532 logback [nioEventLoopGroup-3-5] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 14:55:11.647 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:55:11.647 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:11.669 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 5
2026-01-13 14:55:11.669 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:55:11.670 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199995(String)
2026-01-13 14:55:11.674 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:55:11.728 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:55:11.729 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199995(String), 35072111199995(String)
2026-01-13 14:55:11.756 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:55:12.015 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryPatrolRecords - ==>  Preparing: select item_text name,item_value val from sys_dict_item where dict_id='5234' and status=1 
2026-01-13 14:55:12.016 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryPatrolRecords - ==> Parameters: 
2026-01-13 14:55:12.020 logback [http-nio-8083-exec-22] DEBUG c.j.m.I.queryPatrolRecords - <==      Total: 7
2026-01-13 14:55:27.600 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.600 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 14:55:27.606 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:55:27.607 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.607 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 14:55:27.616 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:55:27.616 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.616 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 14:55:27.618 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.618 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 14:55:27.621 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:55:27.621 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:55:27.621 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.621 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 14:55:27.621 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 14:55:27.621 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 14:55:27.625 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 14:55:27.625 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.625 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 14:55:27.629 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:55:27.629 logback [http-nio-8083-exec-26] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:55:27.629 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.629 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.629 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 14:55:27.629 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 14:55:27.634 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 14:55:27.634 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 14:55:27.634 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 14:55:27.638 logback [http-nio-8083-exec-26] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:55:27.638 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 14:55:27.638 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.638 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 14:55:27.641 logback [http-nio-8083-exec-25] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 14:55:27.641 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 14:55:27.642 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.134(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 14:55:27.651 logback [http-nio-8083-exec-25] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 14:55:27.661 logback [http-nio-8083-exec-24] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==>  Preparing: SELECT t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, ( SELECT NAME FROM inf_policeman WHERE id = main_policeman ) AS mainPolice, ( SELECT GROUP_CONCAT(NAME) FROM inf_policeman WHERE FIND_IN_SET(id,sub_policeman)) AS subPolice, t1.prison_no AS prisonNo, t1.id AS roomId, t1.room_id AS roomNo, c.in_ip AS inIp, c.device_id AS deviceId,c.in_ext_code AS inExtCode, ( SELECT DISTINCT ( inside_id ) FROM inf_device3d d WHERE d.device_guid = c.device_id ) AS insideId,t2.GroupName as groupName FROM ( SELECT co.ip_address AS out_ip, co.room, co.device_id, co.main_code AS out_main_code, co.ext_code AS out_ext_code, ci.ip_address AS in_ip, ci.main_code AS in_main_code, ci.ext_code AS in_ext_code FROM inf_room_computer_out co, inf_room_computer_in ci WHERE co.room = ci.room AND co.ip_address = ? ) c INNER JOIN inf_monitor_room t1 ON t1.id = c.room left join inf_monitor_roomgroup t2 on t1.group_id=t2.id left join room_month_score t5 on t1.id=t5.room_id WHERE 1 = 1 ORDER BY t1.id 
2026-01-13 14:55:27.661 logback [http-nio-8083-exec-24] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - ==> Parameters: 172.16.40.134(String)
2026-01-13 14:55:27.662 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:55:27.663 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:55:27.664 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==>  Preparing: SELECT tb.room_id AS roomId, tb.type, tb.type_id AS typeId, tb.type_name AS typeName, tb.happen_time AS happenTime, IFNULL( tb.student_nos, "" ) AS studentNos, tb.lev, tb.content, tb.handle FROM ( SELECT t.room_id,t.relus_time AS happen_time, GROUP_CONCAT( DISTINCT t.student_no order by t.student_no ) AS student_nos, CONCAT( '违规等级：', t.lev_name ) AS lev, CONCAT( '违规内容：', t.reason_content ) AS content, CONCAT( '处理情况：', t.handle_content ) AS handle, t.type,t.type_id,t.type_name FROM ( SELECT r.record_id, r.room_id, r.relus_time, r.student_id, if(irr_state=0,s.SNBH,'') student_no, s.NAME, r.irr_state, r.lev_id, l.lev_name, r.reason_id, re.reason_content, h.handle_id, h.handle_content, r.irr_state AS type_id,0 AS type, CASE irr_state WHEN 0 THEN '个人违规' ELSE '监室违规' END AS type_name FROM info_irr_record r LEFT JOIN info_irregularities_lev l ON l.lev_id = r.lev_id LEFT JOIN info_irregularities_reas re ON l.lev_id = re.lev_id AND re.reason_id = r.reason_id LEFT JOIN info_student s ON s.state != 9 AND FIND_IN_SET(s.student_id, r.student_id) AND s.room_num = r.room_id LEFT JOIN ( SELECT h.record_id, GROUP_CONCAT( s.handle_id SEPARATOR ';' ) AS handle_id, GROUP_CONCAT( s.handle_content SEPARATOR ';' ) AS handle_content FROM info_record_hand h, info_handle_situation s WHERE h.handle_id = s.handle_id GROUP BY h.record_id ) h ON h.record_id = r.record_id WHERE r.oper_state = 1 AND r.room_id = ? ) t GROUP BY t.room_id, t.relus_time, lev, content UNION ALL SELECT tt.room_id, tt.warm_time AS happen_time, GROUP_CONCAT( DISTINCT tt.SNBH order by tt.SNBH ) AS student_nos, "" AS lev, tt.content, "" AS handle, tt.type,tt.type_id, tt.type_name FROM ( SELECT w.info_warn_id, w.room_id, w.warm_time, w.warn_content_id, w.student_id, s.SNBH, s.NAME, wc.content,1 AS type, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN 3 ELSE 2 END AS type_id, CASE WHEN ( w.student_id = NULL || w.student_id = '' ) THEN '监室预警' ELSE '个人预警' END AS type_name FROM info_warn w INNER JOIN info_warn_content wc ON wc.warn_content_id = w.warn_content_id INNER JOIN info_warn_type wt ON wt.warn_type_id = wc.warn_type_id LEFT JOIN info_student s ON s.state != 9 AND s.student_id = w.student_id AND s.room_num = w.room_id WHERE w.room_id = ? ) tt GROUP BY tt.room_id,tt.warm_time, tt.warn_content_id,tt.type_id ) tb WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(tb.happen_time) ORDER BY tb.happen_time DESC 
2026-01-13 14:55:27.664 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:55:27.667 logback [http-nio-8083-exec-24] DEBUG c.j.m.IRoomInfoDao.getRoomInfosByIp - <==      Total: 2
2026-01-13 14:55:27.668 logback [http-nio-8083-exec-24] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 14:55:27.668 logback [http-nio-8083-exec-24] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.134(String)
2026-01-13 14:55:27.671 logback [http-nio-8083-exec-24] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 14:55:27.671 logback [http-nio-8083-exec-29] DEBUG c.j.m.IPrisonerDao.queryUpdateInfo - <==      Total: 0
2026-01-13 14:55:27.700 logback [http-nio-8083-exec-15] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:55:27.700 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:55:27.701 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:55:27.706 logback [http-nio-8083-exec-15] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:56:37.588 logback [http-nio-8083-exec-2] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==>  Preparing: SELECT s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_text name,item_value from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.item_value WHERE 1 = 1 AND s.student_id NOT IN ( SELECT DISTINCT o.student_id FROM info_student_outinroom o WHERE o.room_id = ? AND o.out_time IS NOT NULL AND o.back_time IS NULL ) ORDER BY s.student_no ASC 
2026-01-13 14:56:37.589 logback [http-nio-8083-exec-2] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:56:37.596 logback [http-nio-8083-exec-2] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - <==      Total: 7
2026-01-13 14:56:37.596 logback [http-nio-8083-exec-2] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==>  Preparing: SELECT date_format(so.out_time,'%Y-%m-%d %T') AS outTime, so.reson_type AS reasonType, d.item_text AS reasonTypeName,so.id as outRecordId, s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state=1 AND room_num = ?) s INNER JOIN info_student_outinroom so ON so.student_id = s.student_id AND so.room_id = ? AND (so.out_time IS NOT NULL AND so.back_time IS NULL) LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT * FROM sys_dict_item t WHERE t.dict_id = ( SELECT id FROM sys_dict p WHERE p.dict_code = 'OUT_ROOM_REASON' )) d ON d.item_value = so.reson_type LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_value val,item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.val WHERE 1 = 1 ORDER BY s.student_no ASC 
2026-01-13 14:56:37.596 logback [http-nio-8083-exec-2] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:56:37.602 logback [http-nio-8083-exec-2] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - <==      Total: 0
2026-01-13 14:57:07.429 logback [http-nio-8083-exec-12] DEBUG c.j.m.I.queryOutRoomOptions - ==>  Preparing: SELECT id, item_value val, item_text name, status state FROM sys_dict_item WHERE dict_id = ( SELECT id FROM sys_dict p WHERE p.dict_code = 'OUT_ROOM_REASON' ) 
2026-01-13 14:57:07.430 logback [http-nio-8083-exec-12] DEBUG c.j.m.I.queryOutRoomOptions - ==> Parameters: 
2026-01-13 14:57:07.436 logback [http-nio-8083-exec-12] DEBUG c.j.m.I.queryOutRoomOptions - <==      Total: 8
2026-01-13 14:57:12.978 logback [http-nio-8083-exec-6] DEBUG c.j.m.IOutInRoomDao.saveOutRecord - ==>  Preparing: INSERT INTO info_student_outinroom ( student_id, out_police_id, out_time, update_time, reson_type, room_id, back_time, enter_police_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? ) 
2026-01-13 14:57:12.980 logback [http-nio-8083-exec-6] DEBUG c.j.m.IOutInRoomDao.saveOutRecord - ==> Parameters: 350721111202407050001(String), 1e28120ff1a04ccaa597fe18405abcc020241101085035(String), 2026-01-13 14:57:12.978(Timestamp), 2026-01-13 14:57:12.978(Timestamp), 1098(String), 35072111199996(String), null, null
2026-01-13 14:57:12.992 logback [http-nio-8083-exec-6] DEBUG c.j.m.IOutInRoomDao.saveOutRecord - <==    Updates: 1
2026-01-13 14:57:13.224 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:57:13.225 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:57:13.243 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:57:13.243 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:57:13.245 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 14:57:13.245 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:57:13.252 logback [http-nio-8083-exec-7] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==>  Preparing: SELECT s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_text name,item_value from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.item_value WHERE 1 = 1 AND s.student_id NOT IN ( SELECT DISTINCT o.student_id FROM info_student_outinroom o WHERE o.room_id = ? AND o.out_time IS NOT NULL AND o.back_time IS NULL ) ORDER BY s.student_no ASC 
2026-01-13 14:57:13.252 logback [http-nio-8083-exec-7] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:57:13.269 logback [http-nio-8083-exec-3] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:57:13.269 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:57:13.269 logback [http-nio-8083-exec-8] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:57:13.270 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:57:13.270 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:57:13.270 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:57:13.270 logback [http-nio-8083-exec-4] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 14:57:13.270 logback [http-nio-8083-exec-7] DEBUG c.j.m.IOutInRoomDao.queryInRoomList - <==      Total: 6
2026-01-13 14:57:13.270 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 14:57:13.270 logback [http-nio-8083-exec-7] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==>  Preparing: SELECT date_format(so.out_time,'%Y-%m-%d %T') AS outTime, so.reson_type AS reasonType, d.item_text AS reasonTypeName,so.id as outRecordId, s.student_id as studentId, s.student_no as studentNo, s.`name`, date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1 ) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum FROM (SELECT * FROM info_student WHERE state=1 AND room_num = ?) s INNER JOIN info_student_outinroom so ON so.student_id = s.student_id AND so.room_id = ? AND (so.out_time IS NOT NULL AND so.back_time IS NULL) LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT * FROM sys_dict_item t WHERE t.dict_id = ( SELECT id FROM sys_dict p WHERE p.dict_code = 'OUT_ROOM_REASON' )) d ON d.item_value = so.reson_type LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- select item_value val,item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') -- ) dt ON s.case_type = dt.val WHERE 1 = 1 ORDER BY s.student_no ASC 
2026-01-13 14:57:13.270 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 14:57:13.271 logback [http-nio-8083-exec-7] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - ==> Parameters: 35072111199996(String), 35072111199996(String)
2026-01-13 14:57:13.276 logback [http-nio-8083-exec-3] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:57:13.276 logback [http-nio-8083-exec-8] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 14:57:13.279 logback [http-nio-8083-exec-7] DEBUG c.j.m.IOutInRoomDao.queryOutRoomList - <==      Total: 1
2026-01-13 14:57:13.279 logback [http-nio-8083-exec-4] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 15:00:02.019 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 15:00:02.019 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 15:00:02.025 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 15:00:02.026 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:02.027 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 15:00:02.033 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:00:02.035 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:00:02.040 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:00:02.040 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:02.040 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 15:00:02.048 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:02.048 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:00:02.049 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:00:02.055 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:00:02.055 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:02.055 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 15:00:02.062 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:02.062 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:00:02.062 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:00:02.067 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:00:02.067 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:02.068 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 15:00:02.071 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:02.071 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:00:02.072 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:00:02.075 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:00:02.076 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:02.076 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 15:00:02.079 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 15:00:02.079 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:02.079 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 15:00:02.083 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:02.084 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:00:02.084 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:00:02.089 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:00:04.089 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 15:00:04.089 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 15:00:04.095 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 15:00:04.096 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:04.096 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 15:00:04.102 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:04.103 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:00:04.103 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:00:04.110 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:00:04.110 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:04.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 15:00:04.115 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:04.116 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:00:04.116 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:00:04.121 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:00:04.122 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:04.122 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 15:00:04.125 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:04.126 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:00:04.126 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:00:04.129 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:00:04.130 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:04.130 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 15:00:04.133 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:04.134 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:00:04.134 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:00:04.137 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:00:04.139 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:04.139 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 15:00:04.142 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 15:00:04.143 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:00:04.143 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 15:00:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:00:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:00:04.149 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:00:04.152 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:03:28.152 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 15:03:28.152 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.144(String)
2026-01-13 15:03:28.160 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 2
2026-01-13 15:03:28.160 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 15:03:28.161 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.144(String)
2026-01-13 15:03:28.176 logback [nioEventLoopGroup-3-4] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 15:04:25.368 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 15:04:25.368 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.169(String)
2026-01-13 15:04:25.383 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 0
2026-01-13 15:04:25.383 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 15:04:25.384 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 0(Integer), 172.16.40.169(String)
2026-01-13 15:04:25.398 logback [nioEventLoopGroup-3-2] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 1
2026-01-13 15:05:12.759 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==>  Preparing: select (select Name from inf_policeman where id=main_policeman) as mainPolice,(select Name from inf_policeman where id=sub_policeman) as subPoliceman,t1.room_id,t1.id,t3.ip_address as out_ip,t1.prison_no AS prisonNo from inf_monitor_room t1 INNER JOIN inf_room_computer_in t2 on t1.id=t2.room LEFT JOIN inf_room_computer_out t3 on t2.room=t3.room where t2.ip_address=? AND t3.device_name NOT LIKE '%巡视%'; 
2026-01-13 15:05:12.759 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 15:05:12.764 logback [http-nio-8083-exec-16] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - <==      Total: 1
2026-01-13 15:05:12.782 logback [http-nio-8083-exec-5] DEBUG c.j.m.IUpgradeDao.syncInVersion - ==>  Preparing: UPDATE inf_room_computer_in SET current_version = ? WHERE ip_address = ? 
2026-01-13 15:05:12.782 logback [http-nio-8083-exec-5] DEBUG c.j.m.IUpgradeDao.syncInVersion - ==> Parameters: 68(String), 172.16.40.169(String)
2026-01-13 15:05:12.792 logback [http-nio-8083-exec-5] DEBUG c.j.m.IUpgradeDao.syncInVersion - <==    Updates: 1
2026-01-13 15:05:15.356 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.356 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 15:05:15.362 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 15:05:15.362 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.362 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.169(String), 0(Integer), PRISONER_SYNC(String)
2026-01-13 15:05:15.372 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 15:05:15.372 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.372 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 15:05:15.377 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 15:05:15.377 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? ORDER BY tb2.opt_time ASC LIMIT ?,? 
2026-01-13 15:05:15.377 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - ==> Parameters: 2026-01-13 10:30:10(String), 0(Integer), 1(Integer)
2026-01-13 15:05:15.382 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.queryPrisonerPhoto - <==      Total: 0
2026-01-13 15:05:15.383 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.384 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 15:05:15.389 logback [http-nio-8083-exec-14] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 15:05:15.389 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.389 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.169(String), 1(Integer), PRISONER_SYNC(String)
2026-01-13 15:05:15.398 logback [http-nio-8083-exec-14] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 15:05:15.462 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.463 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 15:05:15.468 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 15:05:15.468 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.469 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.169(String), 0(Integer), POLICE_SYNC(String)
2026-01-13 15:05:15.477 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 15:05:15.478 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==>  Preparing: SELECT DATE_FORMAT(update_time,'%Y-%m-%d %T') AS updateTime,person_id AS personId FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.478 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.querySynTime - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 15:05:15.482 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.querySynTime - <==      Total: 1
2026-01-13 15:05:15.482 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? ORDER BY tb1.update_time LIMIT ?,? 
2026-01-13 15:05:15.482 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.queryPolicePhoto - ==> Parameters: 2026-01-13 10:37:34(String), 0(Integer), 1(Integer)
2026-01-13 15:05:15.487 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.queryPolicePhoto - <==      Total: 0
2026-01-13 15:05:15.487 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,DATE_FORMAT(nt.update_time,'%Y-%m-%d %T') AS updateTime,nt.status,nt.person_id AS personId, nt.device_id AS deviceId,nt.sync_code AS syncCode FROM info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.487 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 15:05:15.491 logback [http-nio-8083-exec-27] DEBUG c.j.mysqldao.IFaceDao.getNoticeTask - <==      Total: 1
2026-01-13 15:05:15.491 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==>  Preparing: UPDATE info_notice_task nt, (SELECT DISTINCT d.* FROM ( SELECT co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? ) coi SET status = ? WHERE nt.device_id = coi.device_id AND nt.sync_code = ? 
2026-01-13 15:05:15.491 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - ==> Parameters: 172.16.40.169(String), 1(Integer), POLICE_SYNC(String)
2026-01-13 15:05:15.501 logback [http-nio-8083-exec-27] DEBUG c.j.m.IFaceDao.updateNoticeStatus - <==    Updates: 1
2026-01-13 15:05:16.248 logback [http-nio-8083-exec-17] DEBUG c.j.m.InfoNotifyDao.infoNotifyList - ==>  Preparing: (SELECT (case when t1.irr_state = 1 then CONCAT(t5.lev_name,'[','集体违规',']',t3.reason_content) else CONCAT(t5.lev_name,'[',t2.`name`,']',t3.reason_content) end) infoContent, DATE_FORMAT(t1.relus_time,'%Y-%m-%d %T') infoTime, '违规' as infoType FROM info_irr_record t1 LEFT JOIN info_student t2 ON FIND_IN_SET(t2.student_id,t1.student_id) LEFT JOIN info_irregularities_reas t3 ON t1.reason_id = t3.reason_id LEFT JOIN inf_monitor_room t4 ON t1.room_id = t4.id LEFT JOIN info_irregularities_lev t5 on t1.lev_id = t5.lev_id WHERE to_days(now()) - to_days(t1.create_time) < ? AND t4.id = ? ) union (SELECT t1.message_info infoContent, DATE_FORMAT(t1.release_time,'%Y-%m-%d %T') infoTime, '管教留言' as infoType FROM info_guestbook t1 LEFT JOIN inf_monitor_room t4 ON t1.room_id = t4.id WHERE t1.is_invalid = 1 and to_days(now()) - to_days(t1.release_time) < ? AND t4.id = ? ) ORDER BY infoTime desc 
2026-01-13 15:05:16.248 logback [http-nio-8083-exec-17] DEBUG c.j.m.InfoNotifyDao.infoNotifyList - ==> Parameters: 3(String), 35072111199996(String), 3(String), 35072111199996(String)
2026-01-13 15:05:16.255 logback [http-nio-8083-exec-17] DEBUG c.j.m.InfoNotifyDao.infoNotifyList - <==      Total: 0
2026-01-13 15:05:16.287 logback [http-nio-8083-exec-18] DEBUG c.j.m.IMenuDao.queryIndoorMenu - ==>  Preparing: select * from info_indoor_menu where visible=1 order by sort asc 
2026-01-13 15:05:16.287 logback [http-nio-8083-exec-18] DEBUG c.j.m.IMenuDao.queryIndoorMenu - ==> Parameters: 
2026-01-13 15:05:16.340 logback [http-nio-8083-exec-18] DEBUG c.j.m.IMenuDao.queryIndoorMenu - <==      Total: 11
2026-01-13 15:05:16.795 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 15:05:16.795 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.169(String)
2026-01-13 15:05:16.803 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 0
2026-01-13 15:05:16.804 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 15:05:16.804 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.169(String)
2026-01-13 15:05:16.813 logback [nioEventLoopGroup-3-6] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 1
2026-01-13 15:11:56.636 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 15:11:56.636 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==>  Preparing: SELECT s.student_id as studentId, s.SNBH as studentNo, s.handle_case_comp as handleCaseComp, caseinfo.name as caseName, s.`name`, edu.name as eduTypeName, xb.`name` AS gender, /*性别*/ date_format(s.birthday,'%Y-%m-%d') AS birthday, /*出生日期*/ IFNULL(nation.`name`, '' ) AS nation, /*民族*/ IFNULL(place.`name`, '' ) AS nativePlace, /*籍贯*/ DATE_FORMAT(s.impri_period,'%Y-%m-%d') as impriPeriod,/*办案期限*/ bahj.`name` as bahjName,/*办案环节*/ s.native_place AS nativePlace,/*籍贯*/ IFNULL(domicile.`name`, '' ) AS placeDomicile,/*户籍地*/ s.do_result as doResult, s.id_card_no AS idCard, /*身份证号*/ s.address, /*家庭住址*/ s.native_address as nativeAddress, s.place_domicile_addr AS placeDomicileAddr,/*户籍地详址*/ date_format(s.entry_date,'%Y-%m-%d') AS entryDate, s.litigation_code litigationCode, s.litigation_name litigationName, -- (select item_text name from sys_dict_item where dict_id in (SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE') and item_value=s.case_type) AS involvedType, s.involved_type AS involvedName, s.briefly_case as brieflyCase, IFNULL( slr.all_risk_level, -1) AS riskLevel, IFNULL( b.bed_num, '' ) AS bedNum, date_format(so.out_time,'%Y-%m-%d %T') AS outTime, date_format(so.out_time,'%Y-%m-%d') AS outDate, 0 AS callState, md.status as moodStatus FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id /*-- 风险 --*/ LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id AND ba.student_id != '-1' ) b ON b.student_id = s.student_id and b.room_id = s.room_num /*-- 床号 --*/ -- LEFT JOIN ( -- SELECT d.item_value, d.item_text AS involved_name FROM sys_dict_item d -- WHERE d.dict_id = ( SELECT id FROM sys_dict t WHERE t.dict_code = 'INVOLVED_TYPE' ) -- ) dt ON s.case_type = dt.item_value /*-- 涉案类型 --*/ LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (select MAX(talk_start_time) as startTime,SUBSTRING_INDEX(talk_type,',',1) talk_type,person_id from info_talk_edu where status=1 GROUP BY person_id order by startTime desc) e on s.student_id=e.person_id LEFT JOIN (select item_text name,item_value from sys_dict_item where status=1 and dict_id=(select id from sys_dict where dict_code='TALK_TYPE')) edu on edu.item_value=e.talk_type LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='sex')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='LITIGATION_CODE')) bahj on bahj.item_value = s.hand_case LEFT JOIN (SELECT DISTINCT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='PLACE_DOMICILE')) domicile on domicile.item_value = s.place_domicile LEFT JOIN (SELECT item_text name,item_value FROM sys_dict_item WHERE dict_id= ( SELECT id FROM sys_dict where dict_code='LEAVE_CASEINFO')) caseinfo on caseinfo.item_value = s.main_case LEFT JOIN info_student_mood md on s.student_id=md.student_id WHERE 1 = 1 order by so.out_time DESC 
2026-01-13 15:11:56.637 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 15:11:56.637 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 15:11:56.666 logback [http-nio-8083-exec-23] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 15:11:56.666 logback [http-nio-8083-exec-19] DEBUG c.j.m.IPrisonerDao.queryPrisoners - <==      Total: 7
2026-01-13 15:11:56.667 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 15:11:56.667 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - ==>  Preparing: SELECT count( s.student_id ) AS total, /* 全部人数 */ count( slr.all_risk_level = 1 OR NULL ) AS riskOneTotal, /* 一级风险总人数 */ count( slr.all_risk_level = 2 OR NULL ) AS riskTwoTotal, /* 二级风险总人数 */ count( slr.all_risk_level = 3 OR NULL ) AS riskThreeTotal, /* 三级风险总人数 */ count( IF( DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), DATE_SUB( CURDATE( ), INTERVAL 3 DAY ) <= date( s.entry_date ), NULL ) ) AS newTotal, /* 新入所总人数 */ count( s.litigation_code OR NULL ) AS litigationTotal, /* 诉讼阶段变化总人数 */ count( (so.out_time IS NOT NULL AND so.back_time IS NULL) OR NULL) AS outRoomTotal /* 出监总人数 */ FROM (SELECT * FROM info_student WHERE state = 1 AND room_num = ?) s LEFT JOIN info_student_levelrisk slr ON slr.student_id = s.student_id LEFT JOIN ( SELECT ba.*, bd.room_id,bd.bed_num FROM info_bed_arrangement ba, info_bed bd WHERE ba.bed_id = bd.bed_id ) b ON b.student_id = s.student_id and b.room_id = s.room_num LEFT JOIN ( SELECT DISTINCT o.room_id,o.student_id,o.out_time,o.back_time FROM info_student_outinroom o WHERE o.out_time IS NOT NULL AND o.back_time IS NULL /*-- 出监 --*/ ) so ON so.room_id = s.room_num AND so.student_id = s.student_id LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='GENDER_TYPE')) xb on xb.item_value = s.gender LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='NATION')) nation on nation.item_value = s.nation LEFT JOIN (SELECT item_text,item_value FROM sys_dict_item WHERE dict_id =( SELECT id FROM sys_dict where dict_code='DICT_NATIVE_PLACE')) place on place.item_value = s.native_place 
2026-01-13 15:11:56.667 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 15:11:56.668 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - ==> Parameters: 35072111199996(String)
2026-01-13 15:11:56.673 logback [http-nio-8083-exec-19] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 15:11:56.673 logback [http-nio-8083-exec-23] DEBUG c.j.m.I.queryCountPrisoners - <==      Total: 1
2026-01-13 15:11:58.625 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==>  Preparing: select t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, t1.id, t3.ip_address AS in_ip, t4.inside_id AS insideId, t2.device_id FROM inf_monitor_room t1 INNER JOIN inf_room_computer_out t2 ON t1.id = t2.room INNER JOIN inf_room_computer_in t3 ON t1.id = t3.room LEFT JOIN inf_device3d t4 ON t4.device_guid = t2.device_id left join room_month_score t5 on t1.id=t5.room_id WHERE t2.ip_address = ? 
2026-01-13 15:11:58.626 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 15:11:58.631 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - <==      Total: 2
2026-01-13 15:11:58.632 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 15:11:58.632 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 15:11:58.636 logback [http-nio-8083-exec-22] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 15:12:01.665 logback [nioEventLoopGroup-3-7] DEBUG c.j.m.I.updateSWJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_out co SET co.online_state = ? WHERE co.ip_address = ?; 
2026-01-13 15:12:01.665 logback [nioEventLoopGroup-3-7] DEBUG c.j.m.I.updateSWJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.144(String)
2026-01-13 15:12:01.673 logback [nioEventLoopGroup-3-7] DEBUG c.j.m.I.updateSWJOnlineStatus - <==    Updates: 2
2026-01-13 15:12:01.674 logback [nioEventLoopGroup-3-7] DEBUG c.j.m.I.updateSNJOnlineStatus - ==>  Preparing: UPDATE inf_room_computer_in ci SET ci.online_state = ? WHERE ci.ip_address = ?; 
2026-01-13 15:12:01.674 logback [nioEventLoopGroup-3-7] DEBUG c.j.m.I.updateSNJOnlineStatus - ==> Parameters: 1(Integer), 172.16.40.144(String)
2026-01-13 15:12:01.680 logback [nioEventLoopGroup-3-7] DEBUG c.j.m.I.updateSNJOnlineStatus - <==    Updates: 0
2026-01-13 15:20:02.063 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 15:20:02.064 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 15:20:02.079 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 15:20:02.080 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 15:20:02.091 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:02.092 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:20:02.092 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:20:02.100 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:20:02.100 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:02.101 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 15:20:02.107 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:02.108 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:20:02.108 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:20:02.116 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:20:02.116 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:02.117 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 15:20:02.136 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:02.136 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:20:02.137 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:20:02.147 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:20:02.147 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:02.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 15:20:02.160 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:02.160 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:20:02.161 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:20:02.178 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:20:02.178 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:02.179 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 15:20:02.190 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 15:20:02.190 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:02.190 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 15:20:02.205 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:02.205 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:20:02.206 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:20:02.214 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:20:04.228 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 15:20:04.228 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 15:20:04.236 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 15:20:04.236 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:04.237 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 15:20:04.241 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:04.241 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:20:04.242 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:20:04.248 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:20:04.248 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:04.248 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 15:20:04.253 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:04.254 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:20:04.254 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:20:04.259 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:20:04.260 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:04.260 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 15:20:04.264 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:04.264 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:20:04.264 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:20:04.268 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:20:04.268 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:04.268 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 15:20:04.272 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:04.272 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:20:04.273 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:20:04.276 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:20:04.276 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:04.276 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 15:20:04.283 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 15:20:04.283 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:20:04.283 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 15:20:04.288 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:20:04.288 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:20:04.288 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:20:04.293 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:40:02.052 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 15:40:02.052 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 15:40:02.057 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 15:40:02.057 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:02.057 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 15:40:02.061 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:02.061 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:40:02.061 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:40:02.071 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:40:02.071 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:02.071 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 15:40:02.076 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:02.076 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:40:02.076 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:40:02.076 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:40:02.076 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:02.076 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 15:40:02.083 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:02.083 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:40:02.083 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:40:02.087 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:40:02.087 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:02.087 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 15:40:02.092 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:02.092 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:40:02.092 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:40:02.098 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:40:02.098 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:02.098 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 15:40:02.104 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 15:40:02.105 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:02.105 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 15:40:02.108 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:02.109 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 15:40:02.109 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 15:40:02.114 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 15:40:04.127 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 15:40:04.127 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 15:40:04.134 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 15:40:04.134 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:04.134 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 15:40:04.140 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:04.140 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:40:04.140 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:40:04.145 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:40:04.145 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:04.145 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 15:40:04.155 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:04.157 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:40:04.157 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:40:04.160 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:40:04.160 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:04.160 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 15:40:04.165 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:04.165 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:40:04.165 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:40:04.170 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:40:04.170 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:04.174 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 15:40:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:04.177 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:40:04.177 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:40:04.181 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 15:40:04.181 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:04.181 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 15:40:04.186 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 15:40:04.186 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 15:40:04.186 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 15:40:04.191 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 15:40:04.191 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 15:40:04.191 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 15:40:04.196 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 16:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 16:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 16:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 16:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:00:02.034 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:02.050 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:00:02.066 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:00:02.097 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:00:04.112 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 16:00:04.112 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 16:00:04.112 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 16:00:04.112 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:04.112 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 16:00:04.128 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:04.128 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:00:04.128 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:00:04.128 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:00:04.128 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:04.128 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:00:04.161 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:00:04.161 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:04.161 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 16:00:04.168 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:04.168 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:00:04.168 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:00:04.192 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:20:02.023 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 16:20:02.023 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 16:20:02.039 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 16:20:02.039 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:02.039 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 16:20:02.039 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:02.039 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:20:02.039 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:20:02.039 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:20:02.054 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 16:20:02.086 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:02.086 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:20:02.086 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:20:02.086 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:20:04.101 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 16:20:04.101 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 16:20:04.101 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 16:20:04.101 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:04.101 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 16:20:04.101 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:04.101 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:20:04.101 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:04.117 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 16:20:04.132 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:04.132 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:20:04.132 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:20:04.132 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:20:04.132 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:04.132 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 16:20:04.164 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:20:04.164 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:20:04.164 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:20:04.164 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:40:02.057 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 16:40:02.057 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 16:40:02.061 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 16:40:02.062 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:02.062 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 16:40:02.067 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:02.067 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:40:02.067 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:40:02.074 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:40:02.074 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:02.075 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 16:40:02.077 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:02.078 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:40:02.078 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:40:02.082 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:40:02.083 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:02.083 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 16:40:02.087 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:02.088 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:40:02.088 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:40:02.093 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:40:02.093 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:02.093 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 16:40:02.098 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:02.099 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:40:02.100 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:40:02.107 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:40:02.108 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:02.108 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 16:40:02.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 16:40:02.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:02.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 16:40:02.116 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:02.117 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 16:40:02.117 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 16:40:02.121 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 16:40:04.135 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 16:40:04.135 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 16:40:04.141 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 16:40:04.141 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:04.142 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 16:40:04.147 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:40:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:40:04.156 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:40:04.157 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:04.157 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 16:40:04.160 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:04.160 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:40:04.161 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:40:04.164 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:40:04.165 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:04.165 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 16:40:04.168 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:04.169 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:40:04.170 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:40:04.173 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:40:04.174 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:04.175 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 16:40:04.181 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:04.181 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:40:04.181 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:40:04.185 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 16:40:04.185 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:04.185 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 16:40:04.189 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 16:40:04.190 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 16:40:04.190 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 16:40:04.194 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 16:40:04.194 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 16:40:04.195 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 16:40:04.199 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:00:02.054 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 17:00:02.055 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 17:00:02.060 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 17:00:02.060 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:02.060 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 17:00:02.067 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:02.067 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:00:02.067 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:00:02.077 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:00:02.077 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:02.077 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 17:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:02.082 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:00:02.082 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:00:02.091 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:00:02.092 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:02.092 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 17:00:02.096 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:02.096 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:00:02.096 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:00:02.100 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:00:02.101 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:02.101 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 17:00:02.106 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:02.106 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:00:02.106 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:00:02.110 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:00:02.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:02.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 17:00:02.117 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 17:00:02.118 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:02.118 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 17:00:02.123 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:02.123 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:00:02.124 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:00:02.130 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:00:04.140 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 17:00:04.140 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 17:00:04.145 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 17:00:04.146 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:04.146 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 17:00:04.150 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:04.151 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:00:04.151 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:00:04.158 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:00:04.159 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:04.159 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 17:00:04.163 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:04.164 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:00:04.164 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:00:04.170 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:00:04.171 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:04.171 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 17:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:00:04.177 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:00:04.184 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:00:04.184 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:04.185 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 17:00:04.187 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:04.187 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:00:04.188 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:00:04.192 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:04.193 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 17:00:04.196 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 17:00:04.197 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:00:04.197 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 17:00:04.201 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:00:04.202 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:00:04.202 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:00:04.204 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:20:02.059 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 17:20:02.060 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 17:20:02.067 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 17:20:02.068 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:02.068 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 17:20:02.073 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:02.074 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:20:02.074 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:20:02.079 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:20:02.079 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:02.079 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 17:20:02.084 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:02.084 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:20:02.084 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:20:02.089 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:20:02.089 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:02.089 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 17:20:02.094 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:02.094 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:20:02.094 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:20:02.099 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:20:02.100 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:02.100 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 17:20:02.105 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:02.105 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:20:02.105 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:20:02.109 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:20:02.109 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:02.109 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 17:20:02.114 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 17:20:02.114 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:02.114 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 17:20:02.118 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:02.118 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:20:02.118 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:20:02.122 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:20:04.126 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 17:20:04.126 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 17:20:04.131 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 17:20:04.131 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:04.131 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 17:20:04.135 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:04.136 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:20:04.136 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:20:04.140 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:20:04.143 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:04.143 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 17:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:20:04.149 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:20:04.152 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:20:04.152 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:04.152 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 17:20:04.157 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:04.157 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:20:04.157 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:20:04.162 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:20:04.163 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:04.163 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 17:20:04.167 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:04.168 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:20:04.168 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:20:04.171 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:20:04.172 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:04.172 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 17:20:04.177 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 17:20:04.178 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:20:04.178 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 17:20:04.183 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:20:04.184 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:20:04.185 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:20:04.188 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:47:19.592 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 17:47:19.592 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 17:47:19.592 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 17:47:19.592 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:19.592 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 17:47:19.592 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:19.592 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:47:19.592 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:47:19.623 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:47:19.623 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:19.623 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 17:47:19.623 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:19.623 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:47:19.623 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:47:19.639 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:47:19.639 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:19.639 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 17:47:19.639 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:19.639 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:47:19.639 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:19.655 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 17:47:19.670 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:19.670 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 17:47:19.670 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 17:47:19.670 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:21.686 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:21.701 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 17:47:21.717 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 17:47:21.732 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 18:00:02.065 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 18:00:02.065 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 18:00:02.070 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 18:00:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:02.070 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 18:00:02.075 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:02.075 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 18:00:02.075 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 18:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 18:00:02.081 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:02.083 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 18:00:02.087 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:02.087 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 18:00:02.087 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 18:00:02.088 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 18:00:02.088 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:02.088 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 18:00:02.096 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:02.096 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 18:00:02.096 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 18:00:02.101 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 18:00:02.102 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:02.102 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 18:00:02.102 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:02.102 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 18:00:02.102 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 18:00:02.107 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 18:00:02.107 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:02.107 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 18:00:02.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 18:00:02.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:02.111 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 18:00:02.116 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:02.116 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 18:00:02.116 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 18:00:02.121 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 18:00:04.130 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 18:00:04.130 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 18:00:04.136 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 18:00:04.136 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:04.136 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 18:00:04.142 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:04.142 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 18:00:04.142 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 18:00:04.147 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 18:00:04.147 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:04.147 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 18:00:04.148 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 18:00:04.148 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 18:00:04.153 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 18:00:04.153 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:04.153 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 18:00:04.153 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:04.153 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 18:00:04.153 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 18:00:04.158 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 18:00:04.158 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:04.158 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 18:00:04.163 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:04.163 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 18:00:04.163 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 18:00:04.173 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 18:00:04.173 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:04.173 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 18:00:04.174 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 18:00:04.174 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 18:00:04.174 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 18:00:04.178 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 18:00:04.178 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 18:00:04.178 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 18:00:04.183 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 18:53:57.420 logback [http-nio-8083-exec-15] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==>  Preparing: select (select Name from inf_policeman where id=main_policeman) as mainPolice,(select Name from inf_policeman where id=sub_policeman) as subPoliceman,t1.room_id,t1.id,t3.ip_address as out_ip,t1.prison_no AS prisonNo from inf_monitor_room t1 INNER JOIN inf_room_computer_in t2 on t1.id=t2.room LEFT JOIN inf_room_computer_out t3 on t2.room=t3.room where t2.ip_address=? AND t3.device_name NOT LIKE '%巡视%'; 
2026-01-13 18:53:57.420 logback [http-nio-8083-exec-15] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - ==> Parameters: 172.16.40.169(String)
2026-01-13 18:53:57.425 logback [http-nio-8083-exec-15] DEBUG c.j.m.IRoomInfoDao.getRoomInfoBySNIp - <==      Total: 1
2026-01-13 18:54:00.923 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==>  Preparing: select t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, t1.id, t3.ip_address AS in_ip, t4.inside_id AS insideId, t2.device_id FROM inf_monitor_room t1 INNER JOIN inf_room_computer_out t2 ON t1.id = t2.room INNER JOIN inf_room_computer_in t3 ON t1.id = t3.room LEFT JOIN inf_device3d t4 ON t4.device_guid = t2.device_id left join room_month_score t5 on t1.id=t5.room_id WHERE t2.ip_address = ? 
2026-01-13 18:54:00.926 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==> Parameters: 172.16.40.134(String)
2026-01-13 18:54:00.972 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - <==      Total: 2
2026-01-13 18:54:00.974 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 18:54:00.974 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.134(String)
2026-01-13 18:54:00.979 logback [http-nio-8083-exec-28] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 18:54:04.714 logback [http-nio-8083-exec-30] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==>  Preparing: select t5.assess_month as assessMonth, t5.score, t5.level_status as levelStatus, t1.id, t3.ip_address AS in_ip, t4.inside_id AS insideId, t2.device_id FROM inf_monitor_room t1 INNER JOIN inf_room_computer_out t2 ON t1.id = t2.room INNER JOIN inf_room_computer_in t3 ON t1.id = t3.room LEFT JOIN inf_device3d t4 ON t4.device_guid = t2.device_id left join room_month_score t5 on t1.id=t5.room_id WHERE t2.ip_address = ? 
2026-01-13 18:54:04.714 logback [http-nio-8083-exec-30] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - ==> Parameters: 172.16.40.144(String)
2026-01-13 18:54:04.714 logback [http-nio-8083-exec-30] DEBUG c.j.m.IRoomInfoDao.getRoomInfoByIp - <==      Total: 2
2026-01-13 18:54:04.714 logback [http-nio-8083-exec-30] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==>  Preparing: select room,(select `name` from info_student where student_id=t1.student_id) stuName,t3.start_time,t3.end_time from info_duty_adjust t1 left JOIN info_duty_schedule_setting t3 on t1.setting_id=t3.setting_id INNER JOIN inf_room_computer_out t2 on t1.room_id=t2.room where t2.ip_address=? and start_time is not NULL AND CURTIME() >= t3.start_time AND CURTIME() <=t3.end_time and t1.duty_item_id=(select CASE date_format(curdate(),'%w') WHEN 0 THEN 7 ELSE date_format(curdate(),'%w') END); 
2026-01-13 18:54:04.714 logback [http-nio-8083-exec-30] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - ==> Parameters: 172.16.40.144(String)
2026-01-13 18:54:04.714 logback [http-nio-8083-exec-30] DEBUG c.j.m.IRoomInfoDao.getDutyInfo - <==      Total: 0
2026-01-13 19:00:14.477 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:14.493 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), POLICE_SYNC(String)
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:14.508 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), POLICE_SYNC(String)
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), POLICE_SYNC(String)
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), POLICE_SYNC(String)
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==>  Preparing: SELECT tb1.id, tb1.ifUse as state, DATE_FORMAT(tb1.update_time,'%Y-%m-%d %T') AS updateTime, tb1.`name`, tb2.pic_path AS photo FROM inf_policeman tb1 LEFT JOIN info_policeman_photo tb2 ON tb1.id = tb2.policeman_guid WHERE tb2.pic_path IS NOT NULL AND update_time IS NOT NULL /*更新时间*/ and tb1.update_time > ? 
2026-01-13 19:00:14.524 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - ==> Parameters: 2026-01-13 10:37:34(String)
2026-01-13 19:00:14.540 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPoliceList - <==      Total: 0
2026-01-13 19:00:16.555 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==>  Preparing: SELECT d.name,d.room,d.ip_address AS ipAddress,d.port,d.device_id AS deviceId FROM ( SELECT co.device_name name,co.room,co.ip_address,co.port,co.device_id,co.call_phone,co.online_state,co.main_code,co.ext_code FROM inf_room_computer_out co UNION ALL SELECT ci.device_name name,ci.room,ci.ip_address,ci.port,ci.device_id,ci.call_phone,ci.online_state,ci.main_code,ci.ext_code FROM inf_room_computer_in ci ) d JOIN inf_monitor_room mr ON mr.state = 1 AND mr.id = d.room WHERE 1 = 1 
2026-01-13 19:00:16.555 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - ==> Parameters: 
2026-01-13 19:00:16.555 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAllEquipList - <==      Total: 6
2026-01-13 19:00:16.555 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:16.555 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 19:00:16.555 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:16.571 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 19:00:16.571 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 19:00:16.571 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 19:00:16.571 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:16.571 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 19:00:16.571 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:16.571 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 19:00:16.571 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.134(String), PRISONER_SYNC(String)
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.144(String), PRISONER_SYNC(String)
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199995','35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 19:00:16.586 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.138(String), PRISONER_SYNC(String)
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 0
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==>  Preparing: SELECT nt.id,nt.prison_no AS prisonNo,date_format(nt.update_time, '%Y-%m-%d %H:%i:%s') AS updateTime,nt.status,nt.person_id AS personId,nt.device_id AS deviceId,nt.sync_code AS syncCode ,coi.room FROM info_notice_task nt, (SELECT GROUP_CONCAT(room) as room,ip_address,device_id FROM ( SELECT co.room,co.ip_address, co.device_id FROM inf_room_computer_out co UNION ALL SELECT ci.room,ci.ip_address, ci.device_id FROM inf_room_computer_in ci ) d WHERE d.ip_address = ? GROUP BY ip_address ) coi WHERE nt.device_id = coi.device_id AND nt.sync_code = ? and nt.status=1 
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - ==> Parameters: 172.16.40.169(String), PRISONER_SYNC(String)
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.NotifyTaskDao.querySyncData - <==      Total: 1
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==>  Preparing: SELECT tb1.student_id AS id, tb1.`name`, tb2.pic_path AS photo, DATE_FORMAT(tb2.opt_time,'%Y-%m-%d %T') AS optTime, tb1.state AS state FROM (SELECT * FROM info_student WHERE room_num in ('35072111199996')) tb1 LEFT JOIN info_student_photo tb2 ON tb1.student_id = tb2.student_id WHERE tb2.photo_type = 1 and tb2.pic_path IS NOT NULL and tb2.opt_time IS NOT NULL /*更新时间*/ and tb2.opt_time > ? 
2026-01-13 19:00:16.602 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - ==> Parameters: 2026-01-13 10:30:10(String)
2026-01-13 19:00:16.618 logback [pool-2-thread-1] DEBUG c.j.m.N.queryAddPrisonerList - <==      Total: 0
